(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[70],{157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},169:function(e,t,a){"use strict";var i=a(110),s=a(74),o=a(102),n=a(30),r={props:{bridgeTarget:{type:String,default:"external"}},methods:{open(e){let t=this.$el.getAttribute("href");return!Object(i.a)("postMessage")||(e.preventDefault(),/^https?:\/\//.test(t)||/^\/\//.test(t)||(t=Object(n.a)(t)),Object(s.a)(Object(o.f)(t,this.bridgeTarget)),!1)}}},c=a(5),l=Object(c.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("a",{on:{click:this.open}},[this._t("default")],2)}),[],!1,null,null,null);t.a=l.exports},171:function(e,t,a){"use strict";var i=a(7),s=a(19),o=a(13),n={components:{BaseIcon:s.a},mixins:[o.b],props:{folders:{default:()=>[]}},methods:{selectFolder(e){e.disabled||this.$emit("select",e)}}},r=(a(271),a(5)),c=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.folders,(function(t){return a("a",{key:t.id,staticClass:"list-item is-actionable",attrs:{href:"#","data-app-target":"none"},on:{click:function(a){return a.preventDefault(),e.selectFolder(t)}}},[a("base-icon",{attrs:{name:"folder"}}),e._v(" "),a("div",{staticClass:"list-item-text"},[a("div",{staticClass:"big-body-type"},[e._v(e._s(t.name))]),e._v(" "),t.message?a("div",{staticClass:"small-caption-type"},[e._v(e._s(t.message))]):e._e()])],1)})),0)}),[],!1,null,"03620b67",null).exports,l=a(54),d=a(190),u=(a(2),a(66));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={components:{BaseIcon:s.a,FolderSelector:c},mixins:[l.a,o.b,d.a],props:{wall:{default:{}},type:{default:"card"}},data:()=>({state:null,showDropdown:!1,showFolderSelector:!1,foldersFetched:!1}),watch:{showDropdown(e){e&&!this.foldersFetched&&(this.$store.dispatch("fetchWallFolders",this.wall),this.foldersFetched=!0)}},computed:h(h(h({},Object(i.e)(["user","folders"])),Object(i.c)(["activeFolder","allowFolders","isWallInFolder"])),{},{usableFolders(){let e=this.folders;return this.activeFolder&&(e=this.folders.filter(e=>e.id!==this.activeFolder.id)),e.map(e=>{const t=this.isWallInFolder(this.wall.id,e.id),a=t?this.__("Already in folder"):null;return this.folderForSelector(e,{disabled:t,message:a})})},canDelete(){return this.wall.builder.id===this.user.id},canArchive(){return this.wall.builder.id===this.user.id&&!this.wall.archived_at},canUnarchive(){return this.wall.builder.id===this.user.id&&this.wall.archived_at},canPerformAnAction(){return this.allowFolders||this.activeFolder||this.canDelete},showDivider(){return(this.activeFolder||this.allowFolders)&&this.canDelete}}),methods:h(h({},Object(i.b)("confirmationDialog",["openConfirmationDialog"])),{},{show(){this.showDropdown=!0},close(){this.state=null,this.showFolderSelector=!1,this.showDropdown=!1},cancel(){this.close()},moveToFolder(){this.state="moving",this.showFolderSelector=!0},addToFolder(){this.state="adding",this.showFolderSelector=!0},removeFromFolder(){this.state="removing",this.$store.dispatch("removeFromFolder",{wallId:this.wall.id,folderId:this.activeFolder.id}).then(()=>{this.state=null})},folderSelected(e){switch(this.state){case"moving":this.$store.dispatch("moveToFolder",{toFolderId:e.id,fromFolderId:this.activeFolder.id,wallId:this.wall.id}).then(()=>{this.showFolderSelector=!1,this.showDropdown=!1});break;case"adding":this.$store.dispatch("addToFolder",{wallId:this.wall.id,folderId:e.id}).then(()=>{this.showFolderSelector=!1,this.showDropdown=!1})}this.state=null},archiveWall(){this.showDropdown=!1,this.$store.dispatch("archiveWall",{wallId:this.wall.id})},unarchiveWall(){this.showDropdown=!1,this.$store.dispatch("unarchiveWall",{wallId:this.wall.id})},confirmDeleteWall(){this.openConfirmationDialog(h(h({},Object(u.d)(this.wall.title)),{},{afterConfirmActions:[{type:"deleteWall",payload:{wallId:this.wall.id}}]})),this.showDropdown=!1}})},b=(a(272),Object(r.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.canPerformAnAction?a("div",{staticClass:"dropdown-button",attrs:{"data-type":e.type}},[a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Padlet actions",expression:"'Padlet actions'",arg:"title"}],staticClass:"icon-button expand-button",attrs:{role:"menuitem","aria-haspopup":"true"},on:{click:function(t){return t.preventDefault(),e.show(t)}}},[a("base-icon",{attrs:{name:"more_vert"}})],1),e._v(" "),e.showDropdown?a("div",{staticClass:"dropdown-menu"},[a("div",{staticClass:"dropdown dropdown-with-curtain",on:{click:function(t){return t.target!==t.currentTarget?null:(t.preventDefault(),t.stopPropagation(),e.cancel(t))}}},[a("menu",{staticClass:"dropdown-content"},[a("div",{staticClass:"tv tv-list"},[e.activeFolder&&e.usableFolders.length>0?a("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.moveToFolder(t)}}},[a("base-icon",{attrs:{name:"send"}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Move to folder")])],1):e._e(),e._v(" "),e.allowFolders&&e.usableFolders.length>0?a("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.addToFolder(t)}}},[a("base-icon",{attrs:{name:"copy"}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Add to folder")])],1):e._e(),e._v(" "),e.activeFolder?a("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.removeFromFolder(t)}}},[a("base-icon",{attrs:{name:"close"}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Remove from folder")])],1):e._e(),e._v(" "),e.canArchive?a("a",{staticClass:"tv-cell tv-cell-default is-actionable",on:{click:function(t){return t.preventDefault(),e.archiveWall(t)}}},[a("base-icon",{attrs:{name:"archive"}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Archive")])],1):e._e(),e._v(" "),e.canUnarchive?a("a",{staticClass:"tv-cell tv-cell-default is-actionable",on:{click:function(t){return t.preventDefault(),e.unarchiveWall(t)}}},[a("base-icon",{attrs:{name:"archive"}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Unarchive")])],1):e._e(),e._v(" "),e.showDivider?a("div",{staticClass:"tv-divider"}):e._e(),e._v(" "),e.canDelete?a("a",{staticClass:"tv-cell tv-cell-default is-actionable",attrs:{"data-app-target":"none"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.confirmDeleteWall(t)}}},[a("base-icon",{attrs:{name:"delete"}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Delete padlet")])],1):e._e()])])])]):e._e(),e._v(" "),e.showFolderSelector?a("div",{staticClass:"modal standard-scheme",on:{click:function(t){return t.target!==t.currentTarget?null:(t.preventDefault(),t.stopPropagation(),e.close(t))}}},[a("div",{staticClass:"modal-container"},[a("header",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Choose a folder")]),e._v(" "),a("folder-selector",{staticClass:"list modal-list",attrs:{folders:e.usableFolders},on:{select:e.folderSelected,cancel:function(t){return t.stopPropagation(),e.cancel(t)}}})],1)]):e._e()]):e._e()}),[],!1,null,"a0b3e0f0",null));t.a=b.exports},190:function(e,t,a){"use strict";t.a={computed:{maxFolderNameLength:()=>128},methods:{isValidFolderName:e=>e&&e.trim().length>0&&e.trim().length<=128,folderForSelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{id:e.id,name:e.name,disabled:t.disabled||!1,message:t.message||null}}}}},219:function(e,t,a){"use strict";var i=a(69),s=a(169),o=a(171),n=a(2),r={components:{RelativeTime:a(104).a,BridgedA:s.a,PadletCardActions:o.a},props:["wall","actions"],computed:{title:function(){return this.wall.title||Object(n.a)("Untitled padlet")},backgroundStyle:function(){const e=this.wall.background,t=e.dominant_color||[33,33,33],a="rgb(".concat(t.join(","),")"),s=Object(i.processedUrl)(e.url,{crop:"thumb",width:56,height:56});return['url("'.concat(s,'")'),a,"center/cover"].join(" ")}}},c=(a(273),a(5)),l=Object(c.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("bridged-a",{staticClass:"tv-cell tv-cell-subtitle tv-cell-button",attrs:{role:"listitem",href:"/"+e.wall.address,target:"_blank","bridge-target":"padlet","data-app-target":"blank"}},[a("div",{staticClass:"tv-cell-thumb",style:{background:e.backgroundStyle}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("h3",[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"small-caption-type"},[a("span",[e._v(e._s(e.wall.builder.display_name))]),e._v(" \u2022\n      "),a("relative-time",{attrs:{datetime:e.wall.updated_at,dateformat:"short"}})],1)]),e._v(" "),e.actions?a("padlet-card-actions",{staticClass:"accessory",attrs:{type:"list",wall:e.wall}}):e._e()],1)}),[],!1,null,"5ffe5c74",null).exports;const d=(e,t)=>e.updated_at>t.updated_at?-1:e.updated_at===t.updated_at?0:1,u=(e,t)=>e.title.localeCompare(t.title);var p={components:{PadletListitem:l},props:{walls:{type:Array,default:()=>[]},sortBy:{type:String,default:"date"},filter:{type:Function,default:null},navigate:{type:Boolean,default:!0},actions:{type:Boolean,default:!1}},computed:{sortedAndFilteredWalls(){let e=this.filter;return e||(e=e=>e),"date"==this.sortBy?this.walls.slice().filter(e).sort(d):this.walls.slice().filter(e).sort(u)}},methods:{onClick(e,t){this.navigate||(e.preventDefault(),this.$emit("select",t))}}},h=(a(274),Object(c.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tv tv-list tv-list-ruled",attrs:{role:"list","data-turbolinks":"false"}},e._l(e.sortedAndFilteredWalls,(function(t){return a("padlet-listitem",{key:t.id,attrs:{wall:t,role:"listitem",actions:e.actions},nativeOn:{click:function(a){return e.onClick(a,t)}}})})),1)}),[],!1,null,"90df0366",null));t.a=h.exports},271:function(e,t,a){"use strict";var i=a(157);a.n(i).a},272:function(e,t,a){"use strict";var i=a(158);a.n(i).a},273:function(e,t,a){"use strict";var i=a(159);a.n(i).a},274:function(e,t,a){"use strict";var i=a(160);a.n(i).a},358:function(e,t){var a=/^(?:0|[1-9]\d*)$/;function i(e,t){return function(e,t){for(var a=-1,i=e?e.length:0,s=Array(i);++a<i;)s[a]=t(e[a],a,e);return s}(t,(function(t){return e[t]}))}var s,o,n=Object.prototype,r=n.hasOwnProperty,c=n.toString,l=n.propertyIsEnumerable,d=Math.floor,u=(s=Object.keys,o=Object,function(e){return s(o(e))}),p=Math.random;function h(e,t){var a=b(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&f(e)}(e)&&r.call(e,"callee")&&(!l.call(e,"callee")||"[object Arguments]"==c.call(e))}(e)?function(e,t){for(var a=-1,i=Array(e);++a<e;)i[a]=t(a);return i}(e.length,String):[],i=a.length,s=!!i;for(var o in e)!t&&!r.call(e,o)||s&&("length"==o||m(o,i))||a.push(o);return a}function v(e){if(a=(t=e)&&t.constructor,i="function"==typeof a&&a.prototype||n,t!==i)return u(e);var t,a,i,s=[];for(var o in Object(e))r.call(e,o)&&"constructor"!=o&&s.push(o);return s}function m(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var b=Array.isArray;function f(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?c.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}e.exports=function(e){var t,a,s,o=f(e)?e:(t=e)?i(t,function(e){return f(e)?h(e):v(e)}(t)):[],n=o.length;return n>0?o[(a=0,s=n-1,a+d(p()*(s-a+1)))]:void 0}},434:function(e,t,a){},440:function(e,t,a){},441:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){},450:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},454:function(e,t,a){},457:function(e,t,a){},458:function(e,t,a){},459:function(e,t,a){},462:function(e,t,a){},463:function(e,t,a){},464:function(e,t,a){},465:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},468:function(e,t,a){},469:function(e,t,a){},647:function(e,t){e.exports=function(e){for(var t=-1,a=e?e.length:0,i=0,s=[];++t<a;){var o=e[t];o&&(s[i++]=o)}return s}},651:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(29);const s=function(e){const t="test-installed-chrome-extension-"+e,a=document.getElementById(t);a&&document.body.removeChild(a);return new Promise(a=>{const i=document.createElement("script");i.id=t,i.onload=()=>{a(!0)},i.onerror=()=>{a(!1)},i.src=`chrome-extension://${e}/screenshare.js`,document.body.appendChild(i)})};async function o(){return!!Object(i.b)("chromiumBased")&&(await s("kcljbbiddpoeaknnjaminoceoojdbikp")||await s("dkioigicbijecidbooccnhfafineggga"))}},652:function(e,t,a){"use strict";a(55),a(356),a(2);var i=a(27),s=a(54),o={directives:{t:i.a},mixins:[s.a],props:["header","body","actionText","cancelText"],methods:{cancel(){this.$emit("cancel")},action(){this.$emit("action")}}},n=(a(709),a(5)),r=Object(n.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal is-wide",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[a("div",{staticClass:"modal-container is-animated scale-up"},[a("div",{staticClass:"modal-image"},[e._t("default")],2),e._v(" "),a("header",{staticClass:"modal-header"},[e._v(e._s(e.header))]),e._v(" "),a("div",{staticClass:"modal-body"},[a("div",[a("div",{staticClass:"regular-type"},[e._v(e._s(e.body))])])]),e._v(" "),a("footer",{staticClass:"modal-footer"},[e.cancelText?a("button",{staticClass:"text-button",on:{click:e.cancel}},[e._v(e._s(e.cancelText))]):a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button",on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),e.actionText?a("button",{staticClass:"text-button",on:{click:e.action}},[e._v(e._s(e.actionText))]):e._e()])])])}),[],!1,null,"3eb01ba2",null);t.a=r.exports},670:function(e,t,a){"use strict";a.r(t);var i=a(7),s=a(27),o=a(37),n=a(212),r=a(19),c={components:{SurfaceComposer:a(654).a}},l=(a(715),a(5)),d=Object(l.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"surface-add-post-chat-composer"},[t("surface-composer")],1)}),[],!1,null,"63558a6e",null).exports,u=a(11),p=a(13),h=a(3),v=a(15),m=a(110),b=function(e,t,a,i){var s,o=arguments.length,n=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,a,n):s(t,a))||n);return o>3&&n&&Object.defineProperty(t,a,n),n},f=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const g=Object(v.d)("map");let w=class extends u.a{constructor(){super(...arguments),this.classes=[]}pick(e,t){this.pickLocation({latLng:e,name:t})}get isAppOpeningNativeLocationPicker(){return this.isApp&&Object(m.a)("useNativeMapLocationPicker")}respondToHeaderHeightUpdate(){this.$nextTick(()=>{this.animationStyle.innerHTML=`\n      .map-input.fab-morphing-leave-to{\n        margin-top: ${this.headerHeight-28}px !important;\n      }\n      `})}respondToFabTransforming(e){e&&(this.classes=[])}respondToPinDragged(){this.classes=["panel-hidden"]}respondToPinDropped(e){this.classes=e?["panel-hidden","fab-appear"]:[]}mounted(){this.$nextTick(()=>{this.animationStyle=document.createElement("style"),this.animationStyle.innerHTML=`\n      .map-input.fab-morphing-leave-to{\n        margin-top: ${this.headerHeight-28}px !important;\n      }\n      `,document.head.appendChild(this.animationStyle)})}};b([v.c,f("design:type",Object)],w.prototype,"headerHeight",void 0),b([v.c,f("design:type",Object)],w.prototype,"isApp",void 0),b([g.Getter,f("design:type",Object)],w.prototype,"map",void 0),b([g.Getter,f("design:type",Object)],w.prototype,"isPickingLocation",void 0),b([g.Getter,f("design:type",Object)],w.prototype,"postWithLocationBeingEditedCid",void 0),b([g.Getter,f("design:type",Object)],w.prototype,"isPreviewPanelShown",void 0),b([g.Action,f("design:type",Object)],w.prototype,"startPickingLocation",void 0),b([g.Action,f("design:type",Object)],w.prototype,"stopPickingLocation",void 0),b([g.Action,f("design:type",Object)],w.prototype,"hidePickLocationPanel",void 0),b([g.Action,f("design:type",Object)],w.prototype,"pickLocation",void 0),b([g.Action,f("design:type",Object)],w.prototype,"enableMapFittingMarkersBounds",void 0),b([Object(h.f)("headerHeight"),f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],w.prototype,"respondToHeaderHeightUpdate",null),b([Object(h.f)("isPickingLocation"),f("design:type",Function),f("design:paramtypes",[Object]),f("design:returntype",void 0)],w.prototype,"respondToFabTransforming",null),w=b([Object(h.a)({components:{BaseIcon:r.a,SurfaceMapLocationPickerPanel:()=>Promise.all([a.e(2),a.e(86)]).then(a.bind(null,1026))},mixins:[p.b]})],w);var _=w,y=(a(716),Object(l.a)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[].concat(["add-post-button"],e.classes,e.isPreviewPanelShown?["preview-shown"]:[])},[a("transition",{attrs:{name:"fab-morphing",mode:"out-in"}},[!e.isPickingLocation||e.isAppOpeningNativeLocationPicker?a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Add post",expression:"'Add post'",arg:"title"}],staticClass:"floating-action-button",style:[{marginTop:e.headerHeight-28+"px"}],on:{click:e.startPickingLocation}},[a("base-icon",{staticClass:"add-icon",attrs:{name:"add"}}),e._v(" "),a("base-icon",{staticClass:"create-icon",attrs:{name:"create"}})],1):e._e(),e._v(" "),e.isPickingLocation&&!e.isAppOpeningNativeLocationPicker?a("div",{staticClass:"map-input"},[a("surface-map-location-picker-panel",{attrs:{map:e.map},on:{"pick-location":e.pick,hide:e.hidePickLocationPanel,close:e.stopPickingLocation,"pin-dragged":e.respondToPinDragged,"pin-dropped":e.respondToPinDropped}})],1):e._e()])],1)}),[],!1,null,"3f2d1a9d",null).exports),C=a(352),k=a(54);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x={mixins:[k.a,p.b],computed:S(S({},Object(i.c)("section",{wallSections:"sections"})),{},{sections(){return this.wallSections.filter(e=>e.id)}}),methods:S(S({},Object(i.b)("post",["pickSection","cancelPickingSection"])),{},{pick(e){this.pickSection({sectionId:e})},cancel(){this.cancelPickingSection()}})},j=Object(l.a)(x,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[e.sections.length>0?a("div",{staticClass:"modal-container"},[a("header",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Pick a column to post to")]),e._v(" "),a("div",{staticClass:"list modal-list"},e._l(e.sections,(function(t){return a("div",{key:t.id,staticClass:"list-item is-actionable big-body-type",on:{click:function(a){return e.pick(t.id)}}},[a("div",{staticClass:"list-item-primary"},[e._v("\n          "+e._s(t.title)+"\n        ")])])})),0)]):a("div",{staticClass:"modal-container"},[a("header",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You have not created any columns yet")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"modal-body"},[e._v("Create a column before posting.")]),e._v(" "),a("footer",{staticClass:"button-list"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button",on:{click:e.cancel}},[e._v("Ok")])])])])}),[],!1,null,null,null).exports,R=a(656),D=a(655),N=a(244),E=a(317),L=a(105),F={components:{BaseIcon:r.a},mixins:[p.b],computed:{timeLimitText(){const e=this.__("%{num} minutes",{num:"5"});return this.__("Your recordings can be up to %{timeLimit} long.",{timeLimit:e})}}},A=(a(720),Object(l.a)(F,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-instructions inverse-scheme tv tv-list"},[a("div",{staticClass:"tv-cell tv-cell-default caption-type"},[a("base-icon",{attrs:{name:"pause_circled_ios"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can pause and resume recording any number of times.")])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default caption-type"},[a("base-icon",{attrs:{name:"watch_ios"}}),e._v(" "),a("span",[e._v(e._s(e.timeLimitText))])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default caption-type"},[a("base-icon",{attrs:{name:"play_circled_ios"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can replay the video before you save.")])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default caption-type"},[a("base-icon",{attrs:{name:"laughing_ios"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You have a beautiful smile.")])],1)])}),[],!1,null,"1b063626",null).exports),T={components:{BaseIcon:r.a,LoadingSpinner:L.a,VideoInstructions:A},mixins:[p.b,E.a],props:{width:Number,height:Number},data:()=>({maxDuration:300,bufferDuration:15,canvasWidth:640,canvasHeight:360}),computed:{constraints(){return{audio:{deviceId:this.activeAudioDeviceId?{exact:this.activeAudioDeviceId}:void 0},video:{deviceId:this.activeVideoDeviceId?{exact:this.activeVideoDeviceId}:void 0,width:3840,height:2160}}},isReachingRecordingLimit(){return this.secondsElapsed>=this.maxDuration-30}},mounted(){this.canvasWidth=this.width,this.canvasHeight=this.height,this.mountRecording("video"),this.mountStreaming()},beforeDestroy(){this.stopRecording(),this.stopStreaming()},methods:{close(){this.$emit("close")},done(){Object(o.a)("Video Booth","Recorded",null,this.secondsElapsed),"stopped"===this.recordingStatus?this.$emit("done",this.recordedBlob()):this.stopRecording()},gotRecordedData(){this.$emit("done",this.recordedBlob())},gotStream(e){const t=e.getVideoTracks()[0];if("function"===typeof t.getSettings){const e=t.getSettings();e.aspectRatio&&(this.canvasHeight=Math.floor(this.canvasWidth/e.aspectRatio))}this.$emit("stream",{canvasHeight:this.canvasHeight}),this.$refs.player.srcObject=e}}},B=(a(721),Object(l.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-booth"},[a("header",{staticClass:"panel-header"},[a("div",{staticClass:"panel-left-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Video booth")]),e._v(" "),a("div",{staticClass:"panel-right-item"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks&&!e.recording,expression:"hasChunks && !recording"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.done}},[e._v("\n        Playback and save\n      ")])])]),e._v(" "),a("div",{staticClass:"panel-body",style:{height:e.canvasHeight+"px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.streaming,expression:"!streaming"}],staticClass:"panel-interstitial tv"},[a("div",{staticClass:"tv-cell"},[a("loading-spinner")],1),e._v(" "),a("div",{staticClass:"tv-cell"},[a("p",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Starting camera and microphone ...")]),e._v(" "),a("p",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Make sure you have given us permission to your camera and microphone.")])])]),e._v(" "),!e.streaming||e.recording||e.hasChunks?e._e():a("video-instructions"),e._v(" "),a("video",{directives:[{name:"show",rawName:"v-show",value:e.streaming,expression:"streaming"}],ref:"player",attrs:{width:e.canvasWidth,height:e.canvasHeight,autoplay:"",muted:""},domProps:{muted:!0}}),e._v(" "),a("div",{staticClass:"video-booth-meta inverse-scheme"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.recording||e.secondsElapsed>0,expression:"recording || secondsElapsed > 0"}],staticClass:"video-booth-duration"},[e._v(e._s(e.recordingDurationText))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"video-booth-beacon"},[a("span",{staticClass:"video-booth-beacon-text"},[e._v("Rec")]),a("base-icon",{attrs:{name:"record"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.recording&&e.hasChunks,expression:"!recording && hasChunks"}],staticClass:"video-booth-meta-overlay"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasReachedRecordingLimit&&e.hasChunks,expression:"!hasReachedRecordingLimit && hasChunks"},{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Paused")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasReachedRecordingLimit,expression:"hasReachedRecordingLimit"},{name:"t",rawName:"v-t"}]},[e._v("Sorry, you've run out of time.")])])])],1),e._v(" "),a("footer",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"panel-footer"},[a("div",{staticClass:"video-booth-device-selector"},[e.audioDevices.length>1?a("div",{staticClass:"select-box video-booth-audio-select-box"},[a("base-icon",{attrs:{name:"mic"}}),e._v(" "),a("select",{on:{change:e.chooseAudioDevice}},e._l(e.audioDevices,(function(t){return a("option",{key:t.id,domProps:{selected:t.id==e.activeAudioDeviceId,value:t.id}},[e._v(e._s(t.label))])})),0)],1):e._e(),e._v(" "),e.videoDevices.length>1?a("div",{staticClass:"select-box video-booth-video-select-box"},[a("base-icon",{attrs:{name:"camera"}}),e._v(" "),a("select",{on:{change:e.chooseVideoDevice}},e._l(e.videoDevices,(function(t){return a("option",{key:t.id,staticClass:"ellipsified-type",domProps:{selected:t.id==e.activeVideoDeviceId,value:t.id}},[e._v(e._s(t.label))])})),0)],1):e._e()]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.streaming&&!e.hasReachedRecordingLimit,expression:"streaming && !hasReachedRecordingLimit"}],staticClass:"floating-action-button",attrs:{title:e.recordingButtonTitle},on:{click:e.startRecording}},[a("base-icon",{attrs:{name:"videocam"}})],1),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks,expression:"hasChunks"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.restartRecording}},[e._v("\n      Discard and restart\n    ")])]),e._v(" "),a("footer",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"panel-footer"},[a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Pause recording",expression:"'Pause recording'",arg:"title"}],staticClass:"floating-action-button video-booth-pause",on:{click:e.pauseRecording}},[a("base-icon",{attrs:{name:"pause"}})],1),e._v(" "),e.isReachingRecordingLimit&&!e.hasReachedRecordingLimit?a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"video-booth-runningout warning-type"},[e._v("\n      You're running out of time.\n    ")]):e._e()])])}),[],!1,null,"817585ce",null).exports);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $={directives:{t:s.a},props:{src:{required:!0,type:String},width:Number,height:Number,backAction:String},data:()=>({title:""}),computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.e)(["isMobile"])),mounted(){this.isMobile||this.$refs.titleInput.focus()},methods:{close(){this.$emit("close")},done(){this.$emit("done",this.title)}}},M=(a(722),Object(l.a)($,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-replay"},[a("header",{staticClass:"panel-header"},[a("div",{staticClass:"panel-left-item"},["cancel"==e.backAction?a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Cancel")]):a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Back")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Looks good?")]),e._v(" "),a("div",{staticClass:"panel-right-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button narrow-button",on:{click:e.done}},[e._v("Save")])])]),e._v(" "),a("div",{staticClass:"video-recorder-screen"},[a("video",{attrs:{src:e.src,width:e.width,height:e.height,controls:"true"}})]),e._v(" "),a("footer",{staticClass:"panel-footer"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Title")]),e._v(" "),a("div",{staticClass:"video-replay-title-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"},{name:"t",rawName:"v-t:placeholder",value:"Enter a title for your recording",expression:"'Enter a title for your recording'",arg:"placeholder"}],ref:"titleInput",attrs:{type:"text"},domProps:{value:e.title},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.done(t)},input:function(t){t.target.composing||(e.title=t.target.value)}}})])])])}),[],!1,null,"9a3c30d6",null).exports),W=a(652);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){V(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var z={components:{RequireNotice:W.a},directives:{t:s.a},mixins:[p.b,k.a],props:["feature"],computed:q(q({},Object(i.e)(["isMac","isWindows","isMobile","isSafari","isIE","isEdge","isChrome"])),{},{browserName(){return this.isSafari?"Safari":this.isIE?"Internet Explorer":this.isEdge?"Edge":this.isChrome?"Chrome":"Your browser"}}),methods:{cancel(){this.$emit("close")},install(){this.isMac?window.open("http://sl.padlet.com/mac_app","_blank"):this.isWindows&&window.open("http://sl.padlet.com/windows_app","_blank"),this.$emit("close")}}},Y=Object(l.a)(z,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isMac?i("require-notice",{attrs:{header:e.__("macOS app required"),body:e.__("%{name} does not support %{feature}. But our macOS App does. Install it to enjoy audio, video, and screen recording.",{name:e.browserName,feature:e.feature}),"action-text":e.__("Install"),"cancel-text":e.__("No thanks")},on:{action:e.install,cancel:e.cancel}},[i("img",{attrs:{src:a(723)}})]):e.isWindows?i("require-notice",{attrs:{header:e.__("Windows app required"),body:e.__("%{name} does not support %{feature}. But our Windows App does. Install it to enjoy audio, video, and screen recording.",{name:e.browserName,feature:e.feature}),"action-text":e.__("Install"),"cancel-text":e.__("No thanks")},on:{action:e.install,cancel:e.cancel}},[i("img",{attrs:{src:a(724)}})]):e.isMobile?i("require-notice",{attrs:{header:e.__("Not supported"),body:e.__("Sorry, this feature is only available on desktop devices."),"cancel-text":e.__("Close")},on:{cancel:e.cancel}}):e._e()}),[],!1,null,null,null).exports,G=a(204);var Q={components:{VideoBooth:B,VideoReplay:M,SurfaceDialogDesktopAppRequired:Y},mixins:[N.a,k.a,p.b],data:()=>({playback:!1,blob:null,canvasWidth:640,canvasHeight:360,supported:G.e,maxFileUploadSize:2147483648}),computed:{playbackURL(){return this.blob?URL.createObjectURL(this.blob):null}},watch:{playbackURL(e,t){t&&URL.revokeObjectURL(t)}},beforeDestroy(){this.playbackURL&&URL.revokeObjectURL(this.playbackURL)},methods:{cancel(){this.supported&&this.$refs.booth.hasChunks?window.confirm(this.__("You have not saved your video. Are you sure you want to close video booth?"))&&this.close():this.close()},close(){this.$emit("close")},done(e){const t=e||"video",a=new File([this.blob],"".concat(t,".").concat(G.d),{type:this.blob.type});this.handleCaption(e),this.handleFile(a)},saveStreamInfo(e){this.canvasHeight=e.canvasHeight},startPlayback(e){this.playback=!0,this.blob=e},stopPlayback(){this.playback=!1}}},J=(a(725),Object(l.a)(Q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.supported?a("div",{staticClass:"video-recorder modal panel panel-top",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[a("div",{staticClass:"panel-container is-animated slide-from-top"},[[e.uploading?a("div",[a("header",{staticClass:"panel-header"}),e._v(" "),a("div",{staticClass:"panel-body",style:{height:this.canvasHeight+"px"}},[a("div",{staticClass:"panel-interstitial"},[a("interstitial-uploader",{attrs:{file:e.file,download:!0,"max-file-size":e.maxFileUploadSize,title:e.__("Saving video")},on:{done:e.onUploadDone,cancel:e.onUploadCancel}})],1)]),e._v(" "),a("footer",{staticClass:"panel-footer"})]):e.playback?a("video-replay",{attrs:{src:e.playbackURL,height:e.canvasHeight,width:e.canvasWidth},on:{close:e.stopPlayback,done:e.done}}):e._e(),e._v(" "),a("video-booth",{directives:[{name:"show",rawName:"v-show",value:!e.playback&&!e.uploading,expression:"!playback && !uploading"}],ref:"booth",attrs:{height:e.canvasHeight,width:e.canvasWidth},on:{done:e.startPlayback,close:e.cancel,stream:e.saveStreamInfo}})]],2)]):a("surface-dialog-desktop-app-required",{attrs:{feature:e.__("video recording")},on:{close:e.cancel}})}),[],!1,null,"e4fd83da",null).exports),K={props:{frequencies:{type:Array,default:()=>[]},backgroundColor:{type:String,default:"#F8F8F8"},barColor:{type:String,default:"#FEC006"},width:{type:Number,default:480},height:{type:Number,default:480}},data:()=>({drawing:!1}),watch:{frequencies(){this.redrawOnNextFrame()},backgroundColor(){this.redrawOnNextFrame()},barColor(){this.redrawOnNextFrame()}},mounted(){this.redrawOnNextFrame()},methods:{redrawOnNextFrame(){this.drawing||(this.drawing=!0,window.requestAnimationFrame(this.redraw.bind(this)))},redraw(){const e=this.$el,t=e.getContext("2d"),a=e.height/255;t.fillStyle=this.backgroundColor,t.fillRect(0,0,e.width,e.height);const i=t.canvas.height;t.strokeStyle=this.barColor,t.lineWidth=3,t.lineJoin="round";let s=1;for(const o of this.frequencies){const e=o*a,n=Math.floor(i-e);t.beginPath(),t.moveTo(s,n),t.lineTo(s,i),t.closePath(),t.stroke(),s+=4}this.drawing=!1}}},X=(a(726),Object(l.a)(K,(function(){var e=this.$createElement;return(this._self._c||e)("canvas",{staticClass:"audio-visualizer",attrs:{width:this.width,height:this.height}})}),[],!1,null,"43642e0d",null).exports),Z={components:{BaseIcon:r.a},mixins:[p.b],computed:{timeLimitText(){const e=this.__("%{num} minutes",{num:"15"});return this.__("Your recordings can be up to %{timeLimit} long.",{timeLimit:e})}}},ee=(a(727),Object(l.a)(Z,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"audio-instructions tv tv-list caption-type"},[a("div",{staticClass:"tv-cell tv-cell-default"},[a("base-icon",{attrs:{name:"pause_circled_ios"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can pause and resume recording any number of times.")])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default"},[a("base-icon",{attrs:{name:"watch_ios"}}),e._v(" "),a("span",[e._v(e._s(e.timeLimitText))])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default"},[a("base-icon",{attrs:{name:"play_circled_ios"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can replay the audio before you save.")])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default"},[a("base-icon",{attrs:{name:"laughing_ios"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You have a beautiful voice.")])],1)])}),[],!1,null,"557a7112",null).exports),te={components:{AudioVisualizer:X,BaseIcon:r.a,LoadingSpinner:L.a,AudioInstructions:ee},mixins:[E.a,p.b],props:["width","height"],data:()=>({currentVolume:[],maxDuration:900,bufferDuration:15}),computed:{constraints(){return{audio:{deviceId:this.activeAudioDeviceId?{exact:this.activeAudioDeviceId}:void 0}}},isReachingRecordingLimit(){return this.secondsElapsed>=this.maxDuration-60},visualizationColor(){return this.recording?"#FEC006":"#E3E3E3"}},mounted(){this.mountStreaming(),this.mountRecording("audio")},beforeDestroy(){this.stopAudioProcessor(),this.stopRecording(),this.stopStreaming()},methods:{close(){this.$emit("close")},resetCanvas(){const e=this.$refs.canvas,t=e.getContext("2d");t.fillStyle="black",t.fillRect(0,0,e.width,e.height)},done(){Object(o.a)("Audio Booth","Recorded",null,this.secondsElapsed),"stopped"==this.recordingStatus?this.$emit("done",this.recordedBlob()):this.stopRecording()},gotRecordedData(){this.$emit("done",this.recordedBlob())},gotStream(e){this.stopAudioProcessor();const t=window.AudioContext||window.webkitAudioContext;this._audioContext=new t,this._input=this._audioContext.createMediaStreamSource(e),this._analyser=this._audioContext.createAnalyser(),this._scriptProcessor=this._audioContext.createScriptProcessor(),this._analyser.smoothingTimeConstant=.3,this._analyser.fftSize=256,this._input.connect(this._analyser),this._analyser.connect(this._scriptProcessor),this._scriptProcessor.connect(this._audioContext.destination),this._scriptProcessor.onaudioprocess=()=>{if(this._analyser){const e=new Uint8Array(128);this._analyser.getByteFrequencyData(e),this.currentVolume=Array.from(e)}}},stopAudioProcessor(){this._audioContext&&(this._scriptProcessor.disconnect(this._audioContext.destination),this._analyser.disconnect(this._scriptProcessor),this._input.disconnect(this._analyser),this._audioContext.close(),this._audioContext=null,this._scriptProcessor=null,this._analyser=null,this._input=null)}}},ae=(a(728),Object(l.a)(te,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"audio-booth"},[a("header",{staticClass:"panel-header"},[a("div",{staticClass:"panel-left-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Audio booth")]),e._v(" "),a("div",{staticClass:"panel-right-item"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks&&!e.recording,expression:"hasChunks && !recording"}],staticClass:"text-button narrow-button",on:{click:e.done}},[e._v("\n        Playback and save\n      ")])])]),e._v(" "),a("div",{staticClass:"panel-body",style:{height:e.height+"px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.streaming,expression:"!streaming"}],staticClass:"panel-interstitial tv"},[a("div",{staticClass:"tv-cell"},[a("loading-spinner")],1),e._v(" "),a("div",{staticClass:"tv-cell"},[a("p",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Starting microphone ...")]),e._v(" "),a("p",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Make sure you have given us permission to use your microphone.")])])]),e._v(" "),e.streaming?a("audio-visualizer",{attrs:{width:e.width,height:e.height,frequencies:e.currentVolume,"bar-color":e.visualizationColor}}):e._e(),e._v(" "),!e.streaming||e.recording||e.hasChunks?e._e():a("audio-instructions"),e._v(" "),a("div",{staticClass:"audio-booth-meta"},[e.recording||e.secondsElapsed>0?a("div",{class:{"display3-type":!0,"caption-type":!e.recording,"error-type":e.recording&&e.isReachingRecordingLimit}},[e._v("\n        "+e._s(e.recordingDurationText)+"\n      ")]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"audio-booth-beacon"},[a("span",{staticClass:"audio-booth-beacon-text"},[e._v("Rec")]),a("base-icon",{attrs:{name:"record"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.recording&&e.hasChunks&&!e.hasReachedRecordingLimit,expression:"!recording && hasChunks && !hasReachedRecordingLimit"},{name:"t",rawName:"v-t"}],staticClass:"audio-booth-beacon caption-type"},[e._v("\n        Paused\n      ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasReachedRecordingLimit,expression:"hasReachedRecordingLimit"}],staticClass:"audio-booth-beacon caption-type"},[e._v("\n        Sorry, you've run out of time.\n      ")])])],1),e._v(" "),a("footer",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"panel-footer"},[a("div",[e.audioDevices.length>1?a("div",{staticClass:"select-box"},[a("select",{on:{change:e.chooseAudioDevice}},e._l(e.audioDevices,(function(t){return a("option",{key:t.id,domProps:{selected:t.id==e.activeAudioDeviceId,value:t.id}},[e._v(e._s(t.label))])})),0)]):e._e()]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.streaming&&!e.hasReachedRecordingLimit,expression:"streaming && !hasReachedRecordingLimit"}],staticClass:"floating-action-button",attrs:{title:e.recordingButtonTitle},on:{click:e.startRecording}},[a("base-icon",{attrs:{name:"mic"}})],1),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.hasChunks,expression:"hasChunks"},{name:"t",rawName:"v-t:title",value:"Start from scratch",expression:"'Start from scratch'",arg:"title"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.restartRecording}},[e._v("\n      Discard and restart\n    ")])]),e._v(" "),a("footer",{directives:[{name:"show",rawName:"v-show",value:e.recording,expression:"recording"}],staticClass:"panel-footer"},[a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Pause recording",expression:"'Pause recording'",arg:"title"}],staticClass:"floating-action-button audio-booth-pause",on:{click:e.pauseRecording}},[a("base-icon",{attrs:{name:"pause"}})],1)])])}),[],!1,null,"7668dae8",null).exports),ie={components:{AudioVisualizer:X},props:{src:{type:String,required:!0}},data:()=>({frequencies:[],playing:!1}),computed:{barColor(){return this.playing?"#7E57C2":"#E3E3E3"}},mounted(){const e=this.$refs.player,t=new(window.AudioContext||window.webkitAudioContext),a=t.createMediaElementSource(e),i=t.createAnalyser();i.fftSize=256,a.connect(i),i.connect(t.destination),this._analyser=i,this._audioContext=t},beforeDestroy(){this._audioContext&&this._audioContext.close()},methods:{stopViz(){this.playing=!1,clearInterval(this._interval)},startViz(){this.playing=!0,this._interval=setInterval(()=>{const e=new Uint8Array(128);this._analyser.getByteFrequencyData(e),this.frequencies=Array.from(e)},32)}}};a(729);function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne={components:{AudioPlayer:Object(l.a)(ie,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"audio-player"},[t("audio-visualizer",{attrs:{frequencies:this.frequencies,"bar-color":this.barColor}}),this._v(" "),t("audio",{ref:"player",attrs:{src:this.src,controls:"true",controlslist:"nodownload"},on:{playing:this.startViz,pause:this.stopViz,ended:this.stopViz}})],1)}),[],!1,null,"17d57c59",null).exports},directives:{t:s.a},props:{src:{type:String,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){oe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.e)(["isMobile"])),data:()=>({title:""}),mounted(){this.isMobile||this.$refs.titleInput.focus()},methods:{close(){this.$emit("close")},done(){this.$emit("done",this.title)}}},re=(a(730),{components:{AudioBooth:ae,AudioReplay:Object(l.a)(ne,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"audio-replay"},[a("header",{staticClass:"panel-header"},[a("div",{staticClass:"panel-left-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Back")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Sounds good?")]),e._v(" "),a("div",{staticClass:"panel-right-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button narrow-button",on:{click:e.done}},[e._v("Save")])])]),e._v(" "),a("audio-player",{attrs:{src:e.src}}),e._v(" "),a("footer",{staticClass:"panel-footer"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Title")]),e._v(" "),a("div",{staticClass:"audio-replay-title-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"},{name:"t",rawName:"v-t:placeholder",value:"Enter a title for your recording",expression:"'Enter a title for your recording'",arg:"placeholder"}],ref:"titleInput",attrs:{type:"text"},domProps:{value:e.title},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.done(t)},input:function(t){t.target.composing||(e.title=t.target.value)}}})])])],1)}),[],!1,null,"bf36a612",null).exports,SurfaceDialogDesktopAppRequired:Y},mixins:[N.a,k.a,p.b],data:()=>({playback:!1,blob:null,width:480,height:480,supported:G.e,maxFileUploadSize:104857600}),computed:{playbackURL(){return this.blob?URL.createObjectURL(this.blob):null}},watch:{playbackURL(e,t){t&&URL.revokeObjectURL(t)}},beforeDestroy(){this.playbackURL&&URL.revokeObjectURL(this.playbackURL)},methods:{cancel(){this.supported&&this.$refs.booth.hasChunks?confirm(this.__("You have not saved your recording. Are you sure you want to close audio booth?"))&&this.close():this.close()},close(){this.$emit("close")},done(e){const t=e||"audio";this.blob.name="".concat(t,".").concat(G.b),this.handleCaption(e),this.handleFile(this.blob)},startPlayback(e){this.playback=!0,this.blob=e},stopPlayback(){this.playback=!1}}}),ce=(a(731),Object(l.a)(re,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.supported?a("div",{staticClass:"audio-recorder modal panel",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[a("div",{staticClass:"panel-container is-animated scale-up"},[e.uploading?a("div",[a("header",{staticClass:"panel-header"}),e._v(" "),a("div",{staticClass:"panel-body"},[a("div",{staticClass:"panel-interstitial"},[a("interstitial-uploader",{attrs:{file:e.file,download:!0,"max-file-size":e.maxFileUploadSize,title:e.__("Saving audio")},on:{done:e.onUploadDone,cancel:e.onUploadCancel}})],1)]),e._v(" "),a("footer",{staticClass:"panel-footer"})]):e.playback?a("audio-replay",{attrs:{src:e.playbackURL},on:{close:e.stopPlayback,done:e.done}}):e._e(),e._v(" "),a("audio-booth",{directives:[{name:"show",rawName:"v-show",value:!e.playback&&!e.uploading,expression:"!playback && !uploading"}],ref:"booth",attrs:{width:e.width,height:e.height},on:{done:e.startPlayback,close:e.cancel}})],1)]):a("surface-dialog-desktop-app-required",{attrs:{feature:e.__("voice recording")},on:{close:e.cancel}})}),[],!1,null,"18173729",null).exports),le=a(653),de=a(219),ue=a(57),pe=a(111),he=a(209),ve=a(21),me={components:{PadletList:de.a,LoadingSpinner:L.a,BaseTextTabs:he.a},mixins:[k.a,p.b],props:["user"],data(){let e=ue.a.getItem("activePadletFilter")||"recents";return(/^folder_/.test(e)||"archived"===e)&&(e="recents"),{walls:[],activeFilter:e,activeSort:ue.a.getItem("activePadletSort")||"date",loading:0,errored:!1}},apollo:{walls:{query:pe.d,variables:function(){return{userId:this.user.id,wallsFilter:this.activeFilter,shouldFetchLinks:!0}},fetchPolicy:"network-only",loadingKey:"loading",watchLoading(e){e&&(this.errored=!1)},error(e){this.errored=!0,Object(ve.c)("GraphQL Error in padlet browser",{context:{message:e.message}})},update(e){return this.errored?[]:e.user.walls.edges.map(e=>e.node)||[]}}},methods:{cancel(){this.close()},close(){this.$emit("close")},select(e){this.$emit("select",e.links.permanent)},changeFilter(e){this.activeFilter=e}}},be=(a(734),Object(l.a)(me,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"padlet-browser side-panel side-panel-with-curtain",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[a("div",{staticClass:"panel-container is-animated slide-from-right"},[a("header",{staticClass:"panel-header panel-header-with-content"},[a("div",{staticClass:"panel-left-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Padlets")]),e._v(" "),a("div",{staticClass:"panel-right-item"})]),e._v(" "),a("base-text-tabs",{staticClass:"padlet-browser-tabs panel-header-content-last",attrs:{tabs:[{text:e.__("Recents"),key:"recents"},{text:e.__("Made"),key:"made"},{text:e.__("Shared"),key:"shared"},{text:e.__("Liked"),key:"liked"},{text:e.__("Network"),key:"network"}],"active-key":e.activeFilter,"click-handler":e.changeFilter,size:"small"}}),e._v(" "),e.walls.length>0?a("div",{staticClass:"padlet-browser-results"},[a("padlet-list",{attrs:{walls:e.walls,"sort-by":e.activeSort,navigate:!1},on:{select:e.select}})],1):a("div",{class:{"padlet-browser-messages":!0,"padlet-browser-empty-message":0===e.loading}},[e.loading>0?a("loading-spinner"):e.errored?a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("Oops! Something went wrong. Please try again.")]):a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"caption-type"},[e._v("No padlets in this folder.")])],1)],1)])}),[],!1,null,"64151388",null).exports),fe=a(69),ge=a(358),we=a.n(ge),_e=a(241),ye=function(e,t,a,i){var s,o=arguments.length,n=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(o<3?s(n):o>3?s(t,a,n):s(t,a))||n);return o>3&&n&&Object.defineProperty(t,a,n),n},Ce=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let ke=class extends u.a{get iconClass(){return{"caption-type":!this.value,"highlighted-type":this.value}}get iconText(){return this.value?"check_box":"check_box_outline_blank"}change(e){return e.target.checked}};ye([Object(h.d)(Boolean),Ce("design:type",Boolean)],ke.prototype,"value",void 0),ye([Object(h.b)("input"),Ce("design:type",Function),Ce("design:paramtypes",[Object]),Ce("design:returntype",void 0)],ke.prototype,"change",null),ke=ye([Object(h.a)({components:{BaseIcon:r.a}})],ke);var Oe=ke,Se=(a(735),Object(l.a)(Oe,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"check-box"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:this.value},on:{change:this.change}}),this._v(" "),t("base-icon",{class:this.iconClass,attrs:{name:this.iconText}})],1)}),[],!1,null,"068db766",null).exports),Pe=a(33);const xe=["leaning tower of pisa","eiffel tower","pyramids of giza","taj mahal","sydney opera house","mt fuji","mt everest","roman colosseum","word island dubai","yellowstone spring","victoria falls","caspian sea","pentagon","potash ponds utah","ayers rock","dead sea","capitol building","easter island","salar de uyuni","red sea","hoover dam","matterhorn","galesnjak island","bernabeu","london eye","palm jumeirah","statue of liberty","mt rushmore","pantheon","shwedagon pagoda","the kaaba","st peters basilica","51.848637, -0.55462","51.562629, -1.605534"],je=e=>{const t=e.split(",");return 2==t.length&&(!isNaN(t[0])&&!isNaN(t[1]))};var Re={components:{BaseIcon:r.a,ProgressIndeterminate:_e.a,CheckBox:Se},mixins:[p.b,k.a],data:()=>({canGeolocate:!1,query:"",randomQuery:we()(xe),loading:!0,mapType:ue.a.getItem("mapBrowserMapType")||"satellite",mapWidth:640,mapHeight:480,imageWidth:640,imageHeight:480,showMarker:"yes"===ue.a.getItem("mapBrowserMarker"),showFormInHeader:!0}),computed:{imageSrc(){return this.query?this.mapSrc:Object(fe.processedUrl)(this.mapSrc,{width:this.imageWidth,height:this.imageHeight})},mapSrc(){let e=this.query?this.query:this.randomQuery;je(e)&&(e='"'.concat(e,'"')),e=encodeURIComponent(e);let t="https://maps.googleapis.com/maps/api/staticmap?center=".concat(e,"&key=AIzaSyD3kjetwpeAYF-eXThlRhc1F1EYwsQvHcY&scale=2&size=").concat(this.mapWidth,"x").concat(this.mapHeight,"&maptype=").concat(this.mapType,"&language=").concat(Pe.b);return this.showMarker&&(t="".concat(t,"&markers=").concat(e)),t}},watch:{mapType(){this.loading=!0},query(){this.loading=!0},showMarker(e){this.loading=!0,ue.a.setItem("mapBrowserMarker",e?"yes":"no"),Object(o.a)("Maps Browser","Changed Marker",e)}},mounted(){Object(o.a)("Maps Browser","Mounted",this.mapType),this.canGeolocate="geolocation"in navigator,this.imageWidth=this.$refs.container.clientWidth,this.showFormInHeader=this.imageWidth>=640,this.imageHeight=Math.floor(.75*this.imageWidth),this.$refs.input.focus()},methods:{changeMapType(e){const t=e.target.value;Object(o.a)("Maps Browser","Changed Type",t),ue.a.setItem("mapBrowserMapType",t),this.mapType=t},cancel(){this.close()},close(){this.$emit("close")},done(){this.$emit("select",this.mapSrc)},geolocate(){Object(o.a)("Maps Browser","Geolocation Started"),this.loading=!0,navigator.geolocation.getCurrentPosition(this.onLocationSuccess.bind(this),this.onLocationError.bind(this))},onImageLoad(){this.loading=!1},onImageError(){this.loading=!1},onLocationSuccess(e){Object(o.a)("Maps Browser","Geolocation Completed"),this.loading=!1,this.query=[e.coords.latitude,e.coords.longitude].join(",")},onLocationError(e){Object(o.a)("Maps Browser","Geolocation Failed"),this.loading=!1,e.code===e.PERMISSION_DENIED&&alert(this.__("Looks like we don't have permission to see your location. You may want to change that. (Don't worry, we do not store your location on our servers.)"))},search(){const e=this.$refs.input.value,t=(e=>{let t=e.match(/\!2s(.+?)\!/);if(t)return t[1];return t=e.match(/https?\:\/\/(.+?)\/place\/(.+?)\//),t?t[2]:null})(e);this.query=t||e,je(this.query)||Object(o.a)("Maps Browser","Searched",this.query)}}},De=(a(736),Object(l.a)(Re,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal panel",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[a("div",{ref:"container",staticClass:"panel-container is-animated scale-up"},[a("header",{staticClass:"panel-header"},[a("div",{staticClass:"panel-left-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),e.showFormInHeader?a("div",{staticClass:"panel-search"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[e.canGeolocate?a("button",{directives:[{name:"t",rawName:"v-t:title",value:"My location",expression:"'My location'",arg:"title"}],staticClass:"icon-button",attrs:{type:"button"},on:{click:e.geolocate}},[a("base-icon",{attrs:{name:"my_location"}})],1):e._e(),e._v(" "),a("input",{directives:[{name:"t",rawName:"v-t:placeholder",value:"Search for a place",expression:"'Search for a place'",arg:"placeholder"}],ref:"input",attrs:{type:"search"},domProps:{value:e.query}}),e._v(" "),a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Search",expression:"'Search'",arg:"title"}],staticClass:"icon-button",attrs:{type:"submit"}},[a("base-icon",{attrs:{name:"arrow_forward"}})],1)])]):a("div",{staticClass:"panel-title"},[e._v(e._s(e.__("Place")))]),e._v(" "),a("div",{staticClass:"panel-right-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button narrow-button",on:{click:e.done}},[e._v("Save")])])]),e._v(" "),a("div",{staticClass:"panel-body"},[e.showFormInHeader?e._e():a("div",{staticClass:"panel-search"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[e.canGeolocate?a("button",{directives:[{name:"t",rawName:"v-t:title",value:"My location",expression:"'My location'",arg:"title"}],staticClass:"icon-button",attrs:{type:"button"},on:{click:e.geolocate}},[a("base-icon",{attrs:{name:"my_location"}})],1):e._e(),e._v(" "),a("input",{directives:[{name:"t",rawName:"v-t:placeholder",value:"Search for a place",expression:"'Search for a place'",arg:"placeholder"}],ref:"input",attrs:{type:"search",maxlength:"1024",autofocus:""},domProps:{value:e.query}}),e._v(" "),a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Search",expression:"'Search'",arg:"title"}],staticClass:"icon-button",attrs:{type:"submit"}},[a("base-icon",{attrs:{name:"arrow_forward"}})],1)])]),e._v(" "),e.loading?a("progress-indeterminate",{staticClass:"map-browser-progress",style:{top:e.showFormInHeader?"0":"44px"}}):e._e(),e._v(" "),a("img",{attrs:{src:e.imageSrc,width:e.imageWidth,height:e.imageHeight},on:{load:e.onImageLoad,error:e.onImageError}})],1),e._v(" "),a("footer",{staticClass:"panel-footer"},[a("div",{staticClass:"radio-button"},[a("label",[a("input",{attrs:{type:"radio",value:"roadmap"},domProps:{checked:"roadmap"==e.mapType},on:{change:e.changeMapType}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Road")])]),e._v(" "),a("label",[a("input",{attrs:{type:"radio",value:"satellite"},domProps:{checked:"satellite"==e.mapType},on:{change:e.changeMapType}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Satellite")])]),e._v(" "),a("label",[a("input",{attrs:{type:"radio",value:"terrain"},domProps:{checked:"terrain"==e.mapType},on:{change:e.changeMapType}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Terrain")])]),e._v(" "),a("label",[a("input",{attrs:{type:"radio",value:"hybrid"},domProps:{checked:"hybrid"==e.mapType},on:{change:e.changeMapType}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Hybrid")])])]),e._v(" "),a("label",{staticClass:"map-browser-mark-check"},[a("check-box",{model:{value:e.showMarker,callback:function(t){e.showMarker=t},expression:"showMarker"}}),a("span",[e._v(e._s(e.__("Show pin")))])],1)])])])}),[],!1,null,"2ff20400",null).exports),Ne=a(657),Ee=a(659),Le=a(357);a(24);function Fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(a),!0).forEach((function(t){Te(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Be={components:{BaseIcon:r.a},mixins:[p.b],props:["audioDevices","activeAudioDeviceId"],methods:{chooseAudioDevice(e){this.$emit("choose-audio-device",e)}},computed:Ae(Ae({},Object(i.e)(["isChrome","isFirefox"])),{},{timeLimitText(){const e=this.__("%{num} minutes",{num:"5"});return this.__("You can record for up to %{timeLimit}. Recording will stop automatically at %{timeLimit}.",{timeLimit:e})}})},Ie=(a(739),Object(l.a)(Be,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screenshare-instructions tv tv-list"},[a("div",{staticClass:"tv-cell tv-cell-default caption-type"},[a("base-icon",{attrs:{name:"watch_ios"}}),e._v(" "),a("span",[e._v(e._s(e.timeLimitText))])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default caption-type"},[a("base-icon",{attrs:{name:"screen_ios"}}),e._v(" "),a("span",[e.isChrome?a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can record the whole screen, an application window, or another browser tab. You'll select what to record\n        in the next step.")]):e._e(),e._v(" "),e.isFirefox?a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can record a screen, or an application window. You\u2019ll select which screen or window to record in the next\n        step.")]):e._e()])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default caption-type"},[a("base-icon",{attrs:{name:"audio_ios"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("You can record with or without audio.")])],1)])}),[],!1,null,"70e1a48c",null).exports);function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function $e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(a),!0).forEach((function(t){Me(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var We={components:{BaseIcon:r.a,LoadingSpinner:L.a,CheckBox:Se,InterstitialUploader:Le.a,ScreenshareInstructions:Ie},mixins:[p.b,E.a],props:{width:Number,height:Number},data:()=>({maxDuration:300,bufferDuration:15,canvasWidth:640,canvasHeight:360,title:"",streamId:null,audioEnabled:!0,videoSource:"screen",isClosingDisabled:!1}),computed:$e($e({},Object(i.e)(["isChrome","isFirefox"])),{},{constraints(){return this.isChrome?{audio:!(!this.audioEnabled||0===this.audioDevices.length)&&"chrome",video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:this.streamId}}}:this.isFirefox?{audio:this.audioEnabled,video:{mediaSource:this.videoSource}}:{}},isReachingRecordingLimit(){return this.secondsElapsed===this.maxDuration-30}}),watch:{recordingDurationText(e){this.$emit("recording-duration",e)},isReachingRecordingLimit(e){!0===e&&alert(this.__("You're running out of time."))},recording(e){e||(this.isFirefox&&(this.isClosingDisabled=!1),this.$emit("recording-interrupted"))}},mounted(){this.canvasWidth=this.width,this.canvasHeight=this.height,this.isChrome&&this.setupAudioStreaming()},beforeDestroy(){this.stopStreaming()},methods:{close(){this.isClosingDisabled||this.$emit("close")},done(){Object(o.a)("Screenshare booth","Recorded",null,this.secondsElapsed),"stopped"==this.recordingStatus?this.$emit("done",this.recordedBlob()):this.stopRecording()},gotRecordedData(){this.$emit("done",this.recordedBlob())},gotStream(e){const t=e.getVideoTracks()[0];if("function"===typeof t.getSettings){const e=t.getSettings();e.height&&(this.hiddenCanvasHeight=t.getSettings().height),e.width&&(this.hiddenCanvasWidth=t.getSettings().width),e.aspectRatio&&(this.canvasHeight=Math.floor(this.canvasWidth/e.aspectRatio))}this.streaming=!0,this.$refs.player.srcObject=e,this.startRecording(),this.$emit("record",this.audioEnabled)},errorGettingStream(e){this.isFirefox&&(this.isClosingDisabled=!1)},requestVideoStreamChrome(){window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),window.addEventListener("message",e=>{const t=e.data,a=t.type,i=t.streamId,s=e.origin;s!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",s),"SS_DIALOG_SUCCESS"===a&&(this.streaming||(this.streamId=i,this.streaming=!0,this.mountRecording("video"),this.mountScreenStreaming()))})},requestVideoStreamDesktopApp(){chrome&&chrome.tabs.query({currentWindow:!0,active:!0},e=>{const t=e[0];chrome.desktopCapture.chooseDesktopMedia(["screen","window","audio"],t,e=>{e?(this.streamId=e,this.mountRecording("video"),this.mountScreenStreaming()):this.close()})})},requestVideoStream(){this.isFirefox&&(this.isClosingDisabled=!0),this.stopStreaming(),this.isChrome&&!chrome.desktopCapture?this.requestVideoStreamChrome():this.isChrome&&chrome.desktopCapture?this.requestVideoStreamDesktopApp():(this.mountRecording("video"),this.mountScreenStreaming())},setupAudioStreaming(){this.mountToSetupAudioStreaming()},chooseScreenRecordingAudioDevice(e){"no_audio"===e.target.value?this.audioEnabled=!1:this.audioEnabled=!0,this.chooseAudioDevice(e)},chooseScreenRecordingVideoSource(e){this.videoSource=e.target.value},setAudioEnabled(e){this.audioEnabled="true"==e.target.value},restart(){this.discardRecording(),this.requestVideoStream()}}},He=(a(740),Object(l.a)(We,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screenshare-booth"},[a("header",{staticClass:"panel-header"},[a("div",{staticClass:"panel-left-item"},[a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.close}},[e._v("Close")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"panel-title"},[e._v("Screen recorder")]),e._v(" "),a("div",{staticClass:"panel-right-item"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.hasRecordedChunks&&!e.recording,expression:"hasRecordedChunks && !recording"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.done}},[e._v("\n        Playback and save\n      ")])])]),e._v(" "),a("div",{staticClass:"panel-body",style:{height:this.canvasHeight+"px"}},[a("video",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"player",attrs:{width:e.canvasWidth,height:e.canvasHeight,autoplay:"",muted:""},domProps:{muted:!0}}),e._v(" "),a("div",[a("screenshare-instructions"),e._v(" "),e.isChrome?e._e():a("div",{staticClass:"screenshare-booth-radio-button"},[a("p",{staticClass:"small-caption-type form-label"},[e._v("Video")]),e._v(" "),a("div",{staticClass:"radio-button"},[a("label",[a("input",{attrs:{type:"radio",value:"screen"},domProps:{checked:"screen"==e.videoSource},on:{change:e.chooseScreenRecordingVideoSource}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Screen")])]),e._v(" "),a("label",[a("input",{attrs:{type:"radio",value:"window"},domProps:{checked:"window"==e.videoSource},on:{change:e.chooseScreenRecordingVideoSource}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Application window")])])])]),e._v(" "),e.isChrome?e._e():a("div",{staticClass:"screenshare-booth-radio-button"},[a("p",{staticClass:"small-caption-type form-label"},[e._v("Audio")]),e._v(" "),a("div",{staticClass:"radio-button"},[a("label",[a("input",{attrs:{type:"radio",value:"true"},domProps:{checked:1==e.audioEnabled},on:{change:e.setAudioEnabled}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("With audio")])]),e._v(" "),a("label",[a("input",{attrs:{type:"radio",value:"false"},domProps:{checked:0==e.audioEnabled},on:{change:e.setAudioEnabled}}),a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Without audio")])])])]),e._v(" "),e.isChrome?a("div",{staticClass:"screenshare-booth-audio-select-box"},[e.audioDevices.length>0?a("div",{staticClass:"select-box"},[a("base-icon",{attrs:{size:"small",name:"mic"}}),e._v(" "),a("select",{on:{change:e.chooseScreenRecordingAudioDevice}},[e._l(e.audioDevices,(function(t){return a("option",{key:t.id,domProps:{selected:t.id==e.activeAudioDeviceId,value:t.id}},[e._v(e._s(t.label))])})),e._v(" "),a("option",{directives:[{name:"t",rawName:"v-t"}],attrs:{value:"no_audio"},domProps:{selected:"no_audio"==e.activeAudioDeviceId}},[e._v("No audio")])],2)],1):e._e(),e._v(" "),0===e.audioDevices.length?a("div",{staticClass:"caption-type"},[a("base-icon",{attrs:{size:"small",name:"mic"}}),e._v(" "),a("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Please allow microphone access to record audio")])],1):e._e()]):e._e()],1)]),e._v(" "),a("footer",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"panel-footer"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!e.streaming&&!e.hasReachedRecordingLimit&&!e.hasRecordedChunks,expression:"!streaming && !hasReachedRecordingLimit && !hasRecordedChunks"}],staticClass:"floating-action-button",attrs:{title:e.recordingButtonTitle},on:{click:e.requestVideoStream}},[a("base-icon",{staticClass:"rotate-icon-270",attrs:{name:"arrow_forward"}})],1),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.hasRecordedChunks,expression:"hasRecordedChunks"},{name:"t",rawName:"v-t"}],staticClass:"text-button narrow-button",on:{click:e.restart}},[e._v("\n      Discard and restart\n    ")])])])}),[],!1,null,"5e0fcdea",null).exports),qe={mixins:[p.b],props:["audioEnabled","recordingDurationText"],computed:{prompt(){return this.audioEnabled?this.__("Recording screen with audio..."):this.__("Recording screen without audio...")}},methods:{stop(){this.$emit("stop")}}};a(741);function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),!0).forEach((function(t){Ye(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ge={components:{ScreenshareBooth:He,ScreenshareStatusBar:Object(l.a)(qe,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"snackbar"},[a("div",{staticClass:"snackbar-container is-animated slide-from-top inverse-scheme"},[e._m(0),e._v(" "),a("span",{staticClass:"prompt"},[e._v(e._s(e.prompt))]),e._v(" "),a("span",{staticClass:"counter caption-type"},[e._v(e._s(e.recordingDurationText)+"/05:00")]),e._v(" "),a("button",{directives:[{name:"t",rawName:"v-t"}],staticClass:"flat-button",on:{click:e.stop}},[e._v("Stop")])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"blinking-red-dot"},[t("div")])}],!1,null,"63a9fc70",null).exports,VideoReplay:M,SurfaceDialogDesktopAppRequired:Y},mixins:[N.a,k.a,p.b],data:()=>({playback:!1,recording:!1,audioEnabled:null,recordingDurationText:"00:00",blob:null,canvasWidth:640,canvasHeight:360,maxFileUploadSize:2147483648}),computed:ze(ze({},Object(i.e)(["isMobile","isChrome","isFirefox"])),{},{playbackURL(){return this.blob?URL.createObjectURL(this.blob):null},supported(){return G.e&&!this.isMobile&&(this.isChrome||this.isFirefox)}}),watch:{playbackURL(e,t){t&&URL.revokeObjectURL(t)}},beforeDestroy(){this.playbackURL&&URL.revokeObjectURL(this.playbackURL)},methods:{cancelAndRestart(){this.supported&&this.$refs.booth.hasRecordedChunks?confirm(this.__("You have not saved your video. Are you sure you want to close the screen recorder?"))&&this.restart():this.restart()},cancel(){this.$refs.booth&&this.$refs.booth.isClosingDisabled||(this.supported&&this.$refs.booth.hasRecordedChunks?confirm(this.__("You have not saved your video. Are you sure you want to close the screen recorder?"))&&this.close():this.close())},restart(){this.$refs.booth.discardRecording(),this.playback=!1,this.blob=null},close(){this.$emit("close")},done(e){const t=e||"screenshare",a=new File([this.blob],"".concat(t,".").concat(G.d),{type:this.blob.type});this.handleCaption(e),this.handleFile(a)},saveStreamInfo(e){this.canvasHeight=e.canvasHeight},startPlayback(e){this.playback=!0,this.blob=e},startRecording(e){this.recording=!0,this.audioEnabled=e},stopRecording(){this.recording=!1,this.$refs.booth.stopRecording(),this.$refs.booth.stopStreaming()},updateRecordingDuration(e){this.recordingDurationText=e},onRecordingInterrupted(){this.recording=!1}}},Qe=(a(742),Object(l.a)(Ge,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.supported?a("div",{staticClass:"screenshare-recorder"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.recording,expression:"!recording"}],staticClass:"modal panel",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[a("div",{staticClass:"panel-container is-animated scale-up"},[e.uploading?a("div",[a("header",{staticClass:"panel-header"}),e._v(" "),a("div",{staticClass:"panel-body",style:{height:this.canvasHeight+"px"}},[a("div",{staticClass:"panel-interstitial"},[a("interstitial-uploader",{attrs:{file:e.file,download:!0,"max-file-size":e.maxFileUploadSize,title:e.__("Saving video")},on:{done:e.onUploadDone,cancel:e.onUploadCancel}})],1)]),e._v(" "),a("footer",{staticClass:"panel-footer"})]):e.playback?a("video-replay",{attrs:{"back-action":"cancel",src:e.playbackURL,height:e.canvasHeight,width:e.canvasWidth},on:{close:e.cancelAndRestart,done:e.done}}):e._e(),e._v(" "),a("screenshare-booth",{directives:[{name:"show",rawName:"v-show",value:!e.playback&&!e.uploading,expression:"!playback && !uploading"}],ref:"booth",attrs:{height:e.canvasHeight,width:e.canvasWidth},on:{done:e.startPlayback,close:e.cancel,stream:e.saveStreamInfo,record:e.startRecording,"recording-duration":e.updateRecordingDuration,"recording-interrupted":e.onRecordingInterrupted}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.supported&&e.recording,expression:"supported && recording"}],on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[a("screenshare-status-bar",{attrs:{"audio-enabled":e.audioEnabled,"recording-duration-text":e.recordingDurationText},on:{stop:e.stopRecording}})],1)]):a("surface-dialog-desktop-app-required",{attrs:{feature:e.__("screen recording")},on:{close:e.cancel}})}),[],!1,null,"abd296ec",null).exports),Je=a(217),Ke={components:{BaseIcon:r.a},directives:{t:s.a},mixins:[k.a],props:["top","left","audioSupport","videoSupport","screenshareSupport","isPhone","windowWidth"],data:()=>({topCorrection:0,leftCorrection:0,Source:Je.a}),computed:{correctedLeft(){return this.left+this.leftCorrection},correctedTop(){return this.top+this.topCorrection},style(){return this.isPhone||this.windowWidth<768?{}:{top:this.correctedTop+"px",left:this.correctedLeft+"px"}}},mounted(){if(!this.isPhone){const e=568,t=336;this.left<0&&(this.leftCorrection=-this.left),this.left+t>window.innerWidth&&(this.leftCorrection=window.innerWidth-(this.left+t)),this.top<0&&(this.topCorrection=-this.top),this.top+e>window.innerHeight&&(this.topCorrection=window.innerHeight-(this.top+e))}},methods:{cancel(){this.$emit("close")},select(e){Object(o.a)("Content Menu","Selected Source",e),this.$emit("select",e)}}},Xe=(a(743),Object(l.a)(Ke,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dropdown dropdown-with-curtain",style:e.style,on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel(t)}}},[a("div",{staticClass:"dropdown-content tv tv-list"},[a("label",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{for:"content-hidden-file-input","data-source":"fileBrowser","data-pepin-id":"wish-more-upload","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.FileBrowser)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"upload"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Upload")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Pick file from your computer.")])])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"linkInput","data-pepin-id":"wish-more-link","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.LinkInput)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"link"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Link")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Enter any URL.")])])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"webBrowser","data-pepin-id":"wish-more-google","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.WebBrowser)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"search_web"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Google")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Search images, videos, audio, GIFs, web.")])])],1),e._v(" "),a("label",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{for:"content-hidden-image-input","data-source":"photoBooth","data-pepin-id":"wish-more-snap","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.PhotoBooth)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"camera"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Snap")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Take photo from your camera.")])])],1),e._v(" "),a("label",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{for:"content-hidden-video-input","data-unsupported":!e.videoSupport,"data-source":"videoRecorder","data-pepin-id":"wish-more-film","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.VideoRecorder)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"videocam"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",[a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Film")]),e.videoSupport?e._e():a("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-type error-type"},[e._v("Not supported")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Capture video from your camera.")])])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-unsupported":!e.audioSupport,"data-source":"audioRecorder","data-pepin-id":"wish-more-voice","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.AudioRecorder)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"mic"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",[a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Voice")]),e.audioSupport?e._e():a("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-type error-type"},[e._v("Not supported")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Record audio from your microphone.")])])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-unsupported":!e.screenshareSupport,"data-source":"screenshareRecorder","data-pepin-id":"wish-more-screen","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.ScreenshareRecorder)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"screen_share"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",[a("span",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Screen")]),e.screenshareSupport?e._e():a("span",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-type error-type"},[e._v("Not supported")])]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Record your screen.")])])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"drawingCanvas","data-pepin-id":"wish-more-draw","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.DrawingCanvas)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"scribble"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Draw")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Doodle on an onscreen canvas.")])])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"mapBrowser","data-pepin-id":"wish-more-place","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.MapBrowser)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"place"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Place")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Add a location.")])])],1),e._v(" "),a("div",{staticClass:"tv-cell tv-cell-default tv-cell-actionable",attrs:{"data-source":"padletBrowser","data-pepin-id":"wish-more-padlet","data-pepin-trigger":"click"},on:{click:function(t){return e.select(e.Source.PadletBrowser)}}},[a("base-icon",{staticClass:"tv-cell-thumb",attrs:{name:"crane"}}),e._v(" "),a("div",{staticClass:"tv-cell-text"},[a("div",{directives:[{name:"t",rawName:"v-t"}]},[e._v("Padlet")]),e._v(" "),a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"small-caption-type"},[e._v("Link to one of your other padlets.")])])],1)])])}),[],!1,null,"600e06e0",null).exports),Ze=a(651);function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(Object(a),!0).forEach((function(t){at(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function at(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var it={components:{LinkInput:Ee.a,FileBrowser:R.a,PhotoBooth:D.a,VideoRecorder:J,AudioRecorder:ce,WebBrowser:le.a,PadletBrowser:be,DrawingCanvas:Ne.a,MapBrowser:De,ContentSourceMenu:Xe,InterstitialUploader:Le.a,ScreenshareRecorder:Qe},mixins:[p.b],data:()=>({audioSupport:G.e,chromeExtensionInstalled:null,uploading:!1,pendingFile:null,Source:Je.a}),computed:tt(tt(tt(tt(tt(tt({},Object(i.e)(["user","wall","isMobile","isChrome","isFirefox","isPhone"])),Object(i.c)("browser",["windowWidth"])),Object(i.c)("post",["postBeingEdited"])),Object(i.c)("contentPicker",["activeContentPickerPanel","contentSourceMenuPosition","xContentSourceMenu"])),Object(i.c)({maxFileUploadSize:"uploadLimit"})),{},{showHiddenInputs(){return this.isMobile},videoSupport(){return G.e||this.isMobile},activePanel(){return this.activeContentPickerPanel},menuTop(){return this.xContentSourceMenu?this.contentSourceMenuPosition.top:null},menuLeft(){return this.xContentSourceMenu?this.contentSourceMenuPosition.left:null},queryHint(){return this.postBeingEdited?this.postBeingEdited.subject:""},screenshareEnabledByDefault(){let e=this.isChrome&&window.chrome&&window.chrome.desktopCapture||this.isFirefox;return G.e&&!this.isMobile&&e},screenshareSupport(){return G.e&&!this.isMobile&&(this.isChrome||this.isFirefox)}}),mounted(){Object(Ze.a)().then(e=>{this.chromeExtensionInstalled=e})},methods:tt(tt(tt(tt({},Object(i.b)(["showExtensionRequired"])),Object(i.b)("contentPicker",["hideContentPickerPanel","hideContentSourceMenu","pickContentSource"])),Object(i.b)("post",["saveContent","saveCaptionAsTitle"])),{},{onUploadCancel(){this.pendingFile=null},onUploadDone(e,t){this.selectLink(t),this.pendingFile=null},onUploadReject(e){this.$emit("reject",e),this.pendingFile=null,this.closePanel()},selectFile(e){this.pendingFile=e.target.files[0],this.closeSourceMenu()},selectLink(e){this.saveContent({content:{link:e}})},setCaption(e){e&&this.saveCaptionAsTitle({caption:e})},closeSourceMenu(){this.hideContentSourceMenu()},closePanel(){this.hideContentPickerPanel()},activatePanel(e){e===this.Source.ScreenshareRecorder&&this.screenshareSupport&&!this.screenshareEnabledByDefault?!0===this.chromeExtensionInstalled?this.pickContentSource({source:e}):this.showExtensionRequired():(e!==this.Source.FileBrowser&&e!==this.Source.PhotoBooth&&e!==this.Source.VideoRecorder||!this.isMobile)&&this.pickContentSource({source:e})}})},st=(a(744),Object(l.a)(it,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-picker"},[e.xContentSourceMenu?a("content-source-menu",{attrs:{"window-width":e.windowWidth,"is-phone":e.isPhone,top:e.menuTop,left:e.menuLeft,"video-support":e.videoSupport,"audio-support":e.audioSupport,"screenshare-support":e.screenshareSupport},on:{select:e.activatePanel,close:e.closeSourceMenu}}):e._e(),e._v(" "),a("div",{staticClass:"content-panels"},[e.activePanel===e.Source.FileBrowser?a("file-browser",{attrs:{"max-file-size":e.maxFileUploadSize},on:{close:e.closePanel,reject:e.onUploadReject,select:e.selectLink}}):e.activePanel===e.Source.LinkInput?a("link-input",{on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.WebBrowser?a("web-browser",{attrs:{q:e.queryHint},on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.PhotoBooth?a("photo-booth",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e.activePanel===e.Source.VideoRecorder?a("video-recorder",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e.activePanel===e.Source.AudioRecorder?a("audio-recorder",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e.activePanel===e.Source.DrawingCanvas?a("drawing-canvas",{on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.PadletBrowser?a("padlet-browser",{attrs:{user:e.user},on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.MapBrowser?a("map-browser",{on:{close:e.closePanel,select:e.selectLink}}):e.activePanel===e.Source.ScreenshareRecorder?a("screenshare-recorder",{on:{close:e.closePanel,select:e.selectLink,caption:e.setCaption}}):e._e()],1),e._v(" "),e.showHiddenInputs?a("div",{staticClass:"content-hidden-inputs"},[a("input",{attrs:{id:"content-hidden-file-input",type:"file",hidden:""},on:{change:e.selectFile}}),e._v(" "),a("input",{attrs:{id:"content-hidden-image-input",type:"file",accept:"image/*",capture:"environment",hidden:""},on:{change:e.selectFile}}),e._v(" "),a("input",{attrs:{id:"content-hidden-video-input",type:"file",accept:"video/*",capture:"environment",hidden:""},on:{change:e.selectFile}})]):e._e(),e._v(" "),e.pendingFile?a("div",{staticClass:"modal panel"},[a("div",{staticClass:"panel-container is-animated scale-up"},[a("div",{staticClass:"panel-body"},[a("interstitial-uploader",{staticClass:"panel-interstitial",attrs:{file:e.pendingFile,title:e.__("Uploading"),"max-file-size":e.maxFileUploadSize},on:{reject:e.onUploadReject,cancel:e.onUploadCancel,done:e.onUploadDone}})],1)])]):e._e()],1)}),[],!1,null,"5e647ac4",null).exports),ot=a(64),nt=a.n(ot);function rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(a),!0).forEach((function(t){lt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var dt={components:{BaseIcon:r.a},directives:{t:s.a},data:()=>({isAtBottom:!0,userScrolledUpAt:null,unreadPostCount:0}),computed:ct(ct(ct({},Object(i.e)(["editorHeight","user","wishListMounted","posts","isReadOnly"])),Object(i.c)("post",["postsArray"])),{},{currentUser(){return this.user},shouldBePinnedToBottom(){return!this.userScrolledUpAt},postsCount(){return this.postsArray.length}}),methods:{scrollToBottom(){this._thresholdElement&&!this.isAtBottom&&(this._scrollContainerElem.scrollTop=this._thresholdElement.offsetTop,this.debouncedScrollToBottom())},debouncedScrollToBottom:nt()(()=>{void 0},100),observeListScrolling(){let e=null,t=this._scrollContainerElem===document?document.documentElement.scrollTop:this._scrollContainerElem.scrollTop,a=0;this._scrollContainerElem.addEventListener("scroll",i=>{const s=this._scrollContainerElem===document?document.documentElement.scrollTop:this._scrollContainerElem.scrollTop;e&&i.timeStamp-e<100&&t>s?a+=1:a=0,a>2&&(this.userScrolledUpAt=new Date,a=0),e=i.timeStamp,t=s})},observeIntersectionOfThresholdElement(){this._intersectionObserver=new IntersectionObserver(e=>{0===e[0].intersectionRatio?this.isAtBottom=!1:this.isAtBottom=!0}),this._intersectionObserver.observe(this._thresholdElement)}},watch:{isAtBottom(e){e?(this.userScrolledUpAt=null,this.lastMessageReadAt=new Date,this.unreadPostCount=0):this.shouldBePinnedToBottom&&setTimeout(()=>{this.shouldBePinnedToBottom&&this.scrollToBottom()},100)},wishListMounted(){this.isReadOnly||("hidden"===getComputedStyle(document.body).overflow?(this._scrollContainerElem=document.getElementById("wish-list"),"visible"===getComputedStyle(this._scrollContainerElem)["overflow-y"]&&(this._scrollContainerElem=document.getElementById("wall-container"))):this._scrollContainerElem=document,this._thresholdElement=document.getElementById("wish-list-bottom"),this.observeListScrolling(),this.observeIntersectionOfThresholdElement(),this.debouncedScrollToBottom())},postsCount(){if(this.userScrolledUpAt){const e=this.postsArray.filter(e=>void 0===e.id||new Date(e.created_at)>this.userScrolledUpAt);e.some(e=>e.author_id===this.currentUser.id)?this.debouncedScrollToBottom():this.unreadPostCount=e.length}else this.debouncedScrollToBottom()}},beforeDestroy(){this._intersectionObserver&&this._intersectionObserver.disconnect()}},ut=(a(745),Object(l.a)(dt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.userScrolledUpAt&&!e.isAtBottom?a("div",{staticClass:"scroll-to-bottom-button",style:{bottom:e.editorHeight+16+"px"}},[e.unreadPostCount>0?a("div",{staticClass:"badge-unread"},[a("div",{staticClass:"badge-unread-number"},[e._v(e._s(e.unreadPostCount))])]):e._e(),e._v(" "),a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Scroll to bottom",expression:"'Scroll to bottom'",arg:"title"}],staticClass:"floating-action-button",on:{click:e.scrollToBottom}},[a("base-icon",{attrs:{name:"caret_arrow_down"}})],1)]):e._e()}),[],!1,null,"d0399296",null).exports),pt=a(647),ht=a.n(pt),vt=a(2);const mt=[];function bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ft(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(a),!0).forEach((function(t){gt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function gt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var wt={components:{BaseIcon:r.a,SurfaceAddPostChatComposer:d,SurfaceMapLocationPicker:y,UploadFile:C.a,SurfaceSectionPicker:j,SurfaceContentPicker:st,SurfacePostsScroll:ut},directives:{t:s.a},computed:ft(ft(ft(ft(ft(ft({},Object(i.e)(["user","wall","panel","nativePostEdit","isMobile","isReadOnly"])),Object(i.c)("post",["postBeingEditedCid","pendingPosts"])),Object(i.c)(["format","canIWrite","isSectioned","isAPanelVisible","isBackchannel","isMap","isTable"])),Object(i.c)("table",{tablePostsToUpload:"postsPendingUpload"})),Object(i.c)({maxFileUploadSize:"uploadLimit"})),{},{showMessage(){return!this.isMobile},canShowAddPost(){const e=this.isReadOnly,t=!!this.postBeingEditedCid,a=this.canIWrite;return!e&&!this.isSectioned&&!(this.isAPanelVisible||t)&&a},canShowMapLocationPicker(){return this.canShowAddPost&&this.isMap},canShowButton(){return this.canShowAddPost&&!this.isBackchannel&&!this.isMap&&!this.isTable},canPost(){return this.canIWrite&&!this.isReadOnly},uploads(){if(this.isSectioned){const e=this.pendingPosts.filter(e=>!!e.wall_section_id);return ht()(e.map(e=>e.file))}return this.isTable?this.tablePostsToUpload.map(e=>e.file):ht()(this.pendingPosts.map(e=>e.file))},showSectionPicker(){if(this.isSectioned){return this.pendingPosts.filter(e=>!e.wall_section_id).length>0}return!1},showPhotoBooth:()=>!0}),methods:ft(ft(ft(ft({},Object(i.b)(["showFileSizeExceeded"])),Object(i.b)("post",["startNewPost","createPost","completePostUpload"])),Object(i.b)("snackbars",["setSnackbar"])),{},{addPost(){Object(o.a)("Posts","add","Plus Button"),this.startNewPost()},fileId:e=>function(e,t="uid"){const a=mt.indexOf(e);return-1===a?(mt.push(e),`${t}${mt.length-1}`):`${t}${a}`}(e,"file"),onUploadError(e,t){this.setSnackbar({message:t}),this.completePostUpload({file:e,status:"error"})},onUploadDone(e,t){this.completePostUpload({file:e,status:t})},onUploadCancel(e){this.setSnackbar({message:Object(vt.a)("Upload canceled")}),this.completePostUpload({file:e,status:"cancel"})},onUploadReject(e){this.showFileSizeExceeded({file:e})},onPhotoSelect(e){this.createPost({attributes:{file:e}})},onLinkSelect(e){this.createPost({attributes:{attachment:e}})},recordWhitelistedClick:n.d})},_t=(a(746),Object(l.a)(wt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"surface-add-post normalize-typography",on:{click:function(t){return t.stopPropagation(),e.recordWhitelistedClick(t)}}},[e.canShowMapLocationPicker?a("surface-map-location-picker",{directives:[{name:"show",rawName:"v-show",value:e.canPost,expression:"canPost"}]}):e.canShowButton?a("div",{staticClass:"add-post-button"},[a("button",{directives:[{name:"t",rawName:"v-t:title",value:"Add post",expression:"'Add post'",arg:"title"}],staticClass:"floating-action-button",on:{click:e.addPost}},[a("base-icon",{staticClass:"add-icon",attrs:{name:"add"}}),e._v(" "),a("base-icon",{staticClass:"create-icon",attrs:{name:"create"}})],1),e._v(" "),e.showMessage?a("div",{directives:[{name:"t",rawName:"v-t"}],staticClass:"add-post-message"},[e._v("\n      Double click anywhere, drag files in, paste from clipboard, or click here to post.\n    ")]):e._e()]):e._e(),e._v(" "),e.uploads.length>0?a("div",{staticClass:"add-post-uploads"},e._l(e.uploads,(function(t){return a("upload-file",{key:e.fileId(t),attrs:{file:t,"max-file-size":e.maxFileUploadSize},on:{error:e.onUploadError,cancel:e.onUploadCancel,done:e.onUploadDone,reject:e.onUploadReject}})})),1):e._e(),e._v(" "),e.showSectionPicker?a("surface-section-picker"):e._e(),e._v(" "),e.isBackchannel&&!e.nativePostEdit&&e.canPost?a("surface-add-post-chat-composer"):e._e(),e._v(" "),e.isBackchannel?a("surface-posts-scroll"):e._e(),e._v(" "),a("surface-content-picker",{staticClass:"add-post-picker",on:{reject:e.onUploadReject}})],1)}),[],!1,null,null,null));t.default=_t.exports},709:function(e,t,a){"use strict";var i=a(434);a.n(i).a},715:function(e,t,a){"use strict";var i=a(440);a.n(i).a},716:function(e,t,a){"use strict";var i=a(441);a.n(i).a},720:function(e,t,a){"use strict";var i=a(445);a.n(i).a},721:function(e,t,a){"use strict";var i=a(446);a.n(i).a},722:function(e,t,a){"use strict";var i=a(447);a.n(i).a},723:function(e,t,a){e.exports=a.p+"media/images/mac_banner@3x-1aab6e699106e81ef1bd817bfe4343ac.png"},724:function(e,t,a){e.exports=a.p+"media/images/windows_banner@3x-a871edf2ef3b1e1ff134fc7e63b48c59.png"},725:function(e,t,a){"use strict";var i=a(448);a.n(i).a},726:function(e,t,a){"use strict";var i=a(449);a.n(i).a},727:function(e,t,a){"use strict";var i=a(450);a.n(i).a},728:function(e,t,a){"use strict";var i=a(451);a.n(i).a},729:function(e,t,a){"use strict";var i=a(452);a.n(i).a},730:function(e,t,a){"use strict";var i=a(453);a.n(i).a},731:function(e,t,a){"use strict";var i=a(454);a.n(i).a},734:function(e,t,a){"use strict";var i=a(457);a.n(i).a},735:function(e,t,a){"use strict";var i=a(458);a.n(i).a},736:function(e,t,a){"use strict";var i=a(459);a.n(i).a},739:function(e,t,a){"use strict";var i=a(462);a.n(i).a},740:function(e,t,a){"use strict";var i=a(463);a.n(i).a},741:function(e,t,a){"use strict";var i=a(464);a.n(i).a},742:function(e,t,a){"use strict";var i=a(465);a.n(i).a},743:function(e,t,a){"use strict";var i=a(466);a.n(i).a},744:function(e,t,a){"use strict";var i=a(467);a.n(i).a},745:function(e,t,a){"use strict";var i=a(468);a.n(i).a},746:function(e,t,a){"use strict";var i=a(469);a.n(i).a}}]);
//# sourceMappingURL=70-a319bfeedc8a4deaba35.chunk.js.map