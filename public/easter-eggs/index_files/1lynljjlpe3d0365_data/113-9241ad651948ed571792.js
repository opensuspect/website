(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[113],{1024:function(t,e,i){"use strict";i.r(e);var s=i(362),n=i(361),r=i(3),o=i(15),a=i(25),l=i(355),d=i(21),h=()=>((t,e,i)=>{const s={selector:"*",enableDrag:!0,enableCrossDrop:!0,enableResize:!0,enableTrash:!1,align:"center",colWidth:null,columns:null,minColumns:1,autoHeight:!0,maxHeight:null,minHeight:100,gutterX:10,gutterY:10,paddingX:10,paddingY:10,animated:!0,animateOnInit:!1,animationSpeed:225,animationThreshold:100,dragClone:!1,deleteClone:!0,dragRate:100,dragWhitelist:"*",crossDropWhitelist:"*",cutoffStart:null,cutoffEnd:null,handle:!1,cloneClass:"ss-cloned-child",activeClass:"ss-active-child",draggedClass:"ss-dragged-child",placeholderClass:"ss-placeholder-child",originalContainerClass:"ss-original-container",currentContainerClass:"ss-current-container",previousContainerClass:"ss-previous-container"};class n{constructor(e,i){this.element=e,this.options=t.extend({},s,i),this.globals={},this.$container=t(this.element),this.errorCheck()&&this.init()}errorCheck(){const t=this.options;let e=!1;if(null===t.colWidth){0===this.$container.children(t.selector).length&&(e=!0,console.error("".concat("Shapeshift ERROR:"," option colWidth must be specified if Shapeshift is initialized with no active children.")))}return!e}init(){return this.createEvents(),this.setGlobals(),this.setIdentifier(),this.setActiveChildren(),this.enableFeatures(),this.gridInit(),this.render(),this.afterInit()}createEvents(){this.options;const t=this.$container;return t.off("ss-arrange").on("ss-arrange",(t,e)=>(null==e&&(e=!1),this.render(!1,e))),t.off("ss-rearrange").on("ss-rearrange",()=>this.render(!0)),t.off("ss-setTargetPosition").on("ss-setTargetPosition",()=>this.setTargetPosition()),t.off("ss-destroy").on("ss-destroy",()=>this.destroy())}setGlobals(){return this.globals.animated=this.options.animateOnInit}afterInit(){return this.globals.animated=this.options.animated}setIdentifier(){return this.identifier="shapeshifted_container_".concat(Math.random().toString(36).substring(7)),this.$container.addClass(this.identifier)}enableFeatures(){if(this.options.enableResize&&this.enableResize(),this.options.enableDrag||this.options.enableCrossDrop)return this.enableDragNDrop()}setActiveChildren(){let e,i,s;const n=this.options,r=this.$container.children(n.selector),o=n.activeClass,a=r.length;for(e=0,s=a,i=0<=s;i?e<s:e>s;i?e++:e--)t(r[e]).addClass(o);this.setParsedChildren();const l=n.columns;return(()=>{let t,i;const s=[];for(e=0,i=this.parsedChildren.length,t=0<=i;t?e<i:e>i;t?e++:e--){const t=this.parsedChildren[e].colspan,i=n.minColumns;t>l&&t>i?(n.minColumns=t,s.push(console.error("Shapeshift ERROR: There are child elements that have a larger colspan than the minimum columns set through options.\noptions.minColumns has been set to ".concat(t)))):s.push(void 0)}return s})()}setParsedChildren(){const e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.$container.find(".".concat(this.options.activeClass)).filter(":visible"):this.$container.find(".".concat(this.options.activeClass)),i=[];for(let s=0,n=e.length,r=0<=n;r?s<n:s>n;r?s++:s--){const n=t(e[s]),r={i:s,el:n,colspan:parseInt(n.attr("data-ss-colspan"))||1,height:n.outerHeight()};i.push(r)}return this.parsedChildren=i}gridInit(){const t=this.options.gutterX;if(this.options.colWidth>=1)return this.globals.col_width=this.options.colWidth+t;let e=this.parsedChildren[0];e||(this.setParsedChildren(!1),e=this.parsedChildren[0]);const i=e.el.outerWidth(),s=e.colspan,n=(i-(s-1)*t)/s;return this.globals.col_width=n+t}render(t,e){return null==t&&(t=!1),this.setGridColumns(),this.arrange(t,e)}setGridColumns(){const t=this.globals,e=this.options,i=t.col_width,s=e.gutterX,n=e.paddingX,r=this.$container.innerWidth()-2*n,o=e.minColumns;let a=e.columns||Math.floor((r+2*s)/i);o&&o>a&&(a=o),t.columns=a;const l=this.parsedChildren.length;switch(a>l&&(a=l),t.child_offset=n,e.align){case"center":var d=a*i-s;return t.child_offset+=(r-d)/2;case"right":return d=a*i-s,t.child_offset+=r-d}}arrange(t,e){t&&this.setParsedChildren();const i=this.globals,s=this.options,n=this.$container,r=this.getPositions(),o=this.parsedChildren,a=o.length,l=i.animated&&a<=s.animationThreshold,d=s.animationSpeed,h=s.draggedClass;for(let c=0,g=a,p=0<=g;p?c<g:c>g;p?c++:c--){let t=o[c].el;const e=r[c],i=t.hasClass(h);if(i){const e=s.placeholderClass;t=t.siblings(".".concat(e))}l&&!i?t.stop(!0,!1).animate(e,d,(function(){})):t.css(e)}if(e&&(l?setTimeout(()=>n.trigger("ss-drop-complete"),d):n.trigger("ss-drop-complete")),n.trigger("ss-arranged"),s.autoHeight){let t=i.container_height;const e=s.maxHeight,r=s.minHeight;return r&&t<r?t=r:e&&t>e&&(t=e),n.height(t)}}getPositions(t){let e,i,s,n,r;null==t&&(t=!0);const o=this.globals,a=this.options,l=a.gutterY,d=a.paddingY,h=a.draggedClass,c=this.parsedChildren,g=c.length,p=[];for(s=0,r=s,i=o.columns,e=0<=i;e?s<i:s>i;e?s++:s--,r=s)p.push(d);const u=t=>{const e=t.col,i=t.colspan,s=t.col*o.col_width+o.child_offset,n=p[e];if(_[t.i]={left:s,top:n},p[e]+=t.height+l,i>=1)return function(t,e,i){let s=[],n=t<e,r=i?n?e+1:e-1:e;for(let o=t;n?o<r:o>r;n?o++:o--)s.push(o);return s}(1,i,!1).map(t=>p[e+t]=p[e])},f=t=>{const e=p.length-t.colspan+1,i=p.slice(0).splice(0,e);let s=void 0;for(let n=0,r=e,o=0<=r;o?n<r:n>r;o?n++:n--){const e=this.lowestCol(i,n),r=t.colspan,o=p[e];let a=!0;for(let t=1,i=r,s=1<=i;s?t<i:t>i;s?t++:t--){if(o<p[e+t]){a=!1;break}}if(a){s=e;break}}return s},b=[],C=()=>{const t=[];for(let e=0,i=b.length,s=0<=i;s?e<i:e>i;s?e++:e--){const i=b[e];i.col=f(i),i.col>=0&&(u(i),t.push(e))}return(()=>{const e=[];for(let i=t.length-1;i>=0;i--){const s=t[i];e.push(b.splice(s,1))}return e})()};var _=[];if((n=()=>(()=>{let e,i;const s=[];for(r=0,i=g,e=0<=i;e?r<i:r>i;e?r++:r--){const e=c[r];t||!e.el.hasClass(h)?(e.colspan>1?e.col=f(e):e.col=this.lowestCol(p),void 0===e.col?b.push(e):u(e),s.push(C())):s.push(void 0)}return s})())(),a.autoHeight){const t=p[this.highestCol(p)]-l;o.container_height=t+d}return _}enableDragNDrop(){let i,s,n,r;const o=this.options,a=this.$container,l=o.activeClass,d=o.draggedClass,h=o.placeholderClass,c=o.originalContainerClass,g=o.currentContainerClass,p=o.previousContainerClass,u=o.deleteClone,f=o.dragRate,b=o.dragClone,C=o.cloneClass;let _=s=i=r=n=null,m=!1;if(o.enableDrag){const v=a.children(".".concat(l)).filter(o.dragWhitelist);v.draggable&&v.draggable({addClasses:!1,containment:"document",cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, textarea, button, select, option",handle:o.handle,zIndex:9999,start(e,o){_=t(e.target),b&&(i=_.clone(!0).insertBefore(_).addClass(C)),_.addClass(d);const a=_.prop("tagName");return s=t("<".concat(a," class='").concat(h,"' style='height: ").concat(_.height(),"px; width: ").concat(_.width(),"'></").concat(a,">")),_.parent().addClass(c).addClass(g),r=_.outerHeight()/2,n=_.outerWidth()/2},drag:(i,o)=>{if(m||b&&u&&t(".".concat(g))[0]===t(".".concat(c))[0]||(s&&s.remove().appendTo(".".concat(g)),t(".".concat(g)).trigger("ss-setTargetPosition"),m=!0,a.trigger("ss-drag-start"),e.setTimeout(()=>m=!1,f)),!_)return;const l=_.parent().offset();l&&(o.position.left=i.pageX-l.left-n,o.position.top=i.pageY-l.top-r)},stop(){const e=t(".".concat(c)),n=t(".".concat(g)),r=t(".".concat(p));return _&&_.removeClass(d),t(".".concat(h)).remove(),b&&(u&&t(".".concat(g))[0]===t(".".concat(c))[0]?(i.remove(),t(".".concat(g)).trigger("ss-rearrange")):i.removeClass(C)),e[0]===n[0]?n.trigger("ss-rearranged",_):(e.trigger("ss-removed",_),n.trigger("ss-added",_)),e.trigger("ss-arrange").removeClass(c),n.trigger("ss-arrange",!0).removeClass(g),r.trigger("ss-arrange").removeClass(p),_=s=null}})}if(o.enableCrossDrop)return a.droppable({accept:o.crossDropWhitelist,tolerance:"intersect",over:e=>(t(".".concat(p)).removeClass(p),t(".".concat(g)).removeClass(g).addClass(p),t(e.target).addClass(g)),drop:(e,i)=>{if(this.options.enableTrash){const e=t(".".concat(c)),s=t(".".concat(g)),n=t(".".concat(p));return _=t(i.helper),s.trigger("ss-trashed",_),_.remove(),e.trigger("ss-rearrange").removeClass(c),s.trigger("ss-rearrange").removeClass(g),n.trigger("ss-arrange").removeClass(p)}}})}setTargetPosition(){const e=this.options;if(e.enableTrash){const e=this.options.placeholderClass;return t(".".concat(e)).remove()}{let i;const s=e.draggedClass,n=t(".".concat(s)),r=n.parent(),o=n.height(),a=n.offset(),l=r.offset();if(!o||!a||!l)return;const d=this.parsedChildren,h=this.getPositions(!1),c=h.length,g=a.left-l.left+this.globals.col_width/2,p=a.top-l.top+o/2;let u=9999999,f=0;if(c>1){let t;const s=e.cutoffStart+1||0;for(let n=s,r=e.cutoffEnd||c,o=s<=r;o?n<r:n>r;o?n++:n--)if(i=h[n],i){const t=g-i.left,e=p-i.top;if(t>0&&e>0){const i=Math.sqrt(e*e+t*t);i<u&&(u=i,f=n,n===c-1&&t>d[n].height/2&&f++)}}f===d.length?(t=d[f-1].el,t.is(n)||n.insertAfter(t)):(t=d[f].el,t.is(n)||n.insertBefore(t))}else 1===c?(i=h[0],i.left<g?this.$container.append(n):this.$container.prepend(n)):this.$container.append(n);if(this.arrange(!0),r[0]!==n.parent()[0]){const i=e.previousContainerClass;return t(".".concat(i)).trigger("ss-rearrange")}}}enableResize(){const i=this.options.animationSpeed;let s=!1;const n="resize.".concat(this.identifier);return t(e).on(n,()=>{if(!s)return s=!0,setTimeout(()=>this.render(),i/3),setTimeout(()=>this.render(),i/3),setTimeout(()=>(s=!1,this.render()),i/3)})}lowestCol(t,e){null==e&&(e=0);const i=t.map((t,e)=>[t,e]);return i.sort((function(t,e){let i=t[0]-e[0];return 0===i&&(i=t[1]-e[1]),i})),i[e][1]}highestCol(i){return t.inArray(Math.max.apply(e,i),i)}destroy(){const t=this.$container;t.off("ss-arrange"),t.off("ss-rearrange"),t.off("ss-setTargetPosition"),t.off("ss-destroy");const e=this.options.activeClass,i=t.find(".".concat(e));return this.options.enableDrag&&c(i.draggable&&i.draggable("instance"),t=>t.destroy()),this.options.enableCrossDrop&&t.droppable("destroy"),i.removeClass(e),t.removeClass(this.identifier)}}return t.fn.shapeshift=function(i){return this.each((function(){const s=c(t(this).attr("class").match(/shapeshifted_container_\w+/),t=>t[0]);if(s){const i="resize.".concat(s);t(e).off(i),t(this).removeClass(s)}return t.data(this,"plugin_".concat("shapeshift"),new n(this,i))}))}})(l.a,window,document);function c(t,e){return"undefined"!==typeof t&&null!==t?e(t):void 0}var g=i(76),p=i(165),u={data:()=>({$_gridMixin_grid:!1,$_gridMixin_initialized:!1,$_gridMixin_isDragging:!1,$_gridMixin_isShapeshifting:!1,$_gridMixin_observer:null,$_gridMixin_savePostHandler:null}),created(){h(),this.$_gridMixin_lazyUpdateGrid=this.debounce(this.$_gridMixin_updateGrid,125)},updated(){this.debouncedUpdateGrid()},beforeDestroy(){this.$_gridMixin_destroyGrid(),this.$_gridMixin_savePostHandler=null,this.$_gridMixin_observer&&this.$_gridMixin_observer.disconnect()},methods:{initializeGrid(t,e){this.$_gridMixin_initialized=!0,this.$_gridMixin_savePostHandler=e,e||Object(d.c)("Using GridMixin without declaring a handler function to save post."),this.$_gridMixin_observe(t)},debounce(t,e,i){let s;return()=>{let n=arguments,r=i&&!s;clearTimeout(s),s=setTimeout(()=>{s=null,i||t.apply(this,n)},e),r&&t.apply(this,n)}},$_gridMixin_savePost(t){let e=t.postCid,i=t.previousCid,s=t.nextCid;this.$_gridMixin_savePostHandler?this.$_gridMixin_savePostHandler({postCid:e,previousCid:i,nextCid:s}):Object(d.a)(new Error("No handler to save post for GridMixin."))},debouncedUpdateGrid(){this.$_gridMixin_initialized?this.$_gridMixin_grid?this.$_gridMixin_lazyUpdateGrid():(this.$_gridMixin_makeGrid(),this.$_gridMixin_registerDomChangeListenersForGrid()):this.$_gridMixin_destroyGrid()},$_gridMixin_onGridFinishDragging(){this.onGridFinishDragging&&this.onGridFinishDragging()},$_gridMixin_makeGrid(){this.$_gridMixin_grid=!0;const t=Object(a.a)(this.$el);this.$_gridMixin_shapeshift(),t.on("ss-rearranged",(t,e)=>{Object(g.a)("wishOrderArray")&&this.$_gridMixin_savePost({postCid:Object(a.a)(e).data("post-cid"),previousCid:Object(a.a)(e).next(".wish").data("post-cid"),nextCid:Object(a.a)(e).prev(".wish").data("post-cid")}),Object(g.a)("wishOrderArray")||Object(p.a)(e)}),t.on("ss-arranged",e=>{t.find(".surface-post").each((t,e)=>{Object(a.a)(e).attr("data-index",Object(a.a)(e).index()+1)})}),t.on("ss-drag-start",t=>{this.isDragging=!0}),t.on("ss-drop-complete",t=>{this.$_gridMixin_onGridFinishDragging(),this.isDragging=!1})},$_gridMixin_destroyGrid(){Object(a.a)(this.$el).off(".grid").trigger("ss-destroy"),this.$_gridMixin_grid=!1,Object(a.a)(this.$el).off(".grid","textarea,img")},$_gridMixin_updateGrid(){this.$_gridMixin_shapeshift()},$_gridMixin_observe(t){const e=new MutationObserver(()=>{this.isDragging||this.isShapeshifting||this.debouncedUpdateGrid()});e.observe(t,{attributes:!0,childList:!0,subtree:!0}),this.$_gridMixin_observer=e},$_gridMixin_shapeshift(){this.isShapeshifting=!0;const t=Object(a.a)("#wish-list");if(t.trigger("ss-destroy"),0!==t.find(".surface-post").length){const e=Object(a.a)(".gutter-sizer").width(),i=parseInt(t.css("paddingLeft")),s=parseInt(t.css("paddingTop"));t.shapeshift({selector:".surface-post",enableDrag:!0,enableCrossDrop:!1,enableResize:!1,enableTrash:!1,dragWhitelist:".wish-editable:not(#wish-new)",gutterX:e,gutterY:e,paddingY:s,paddingX:i})}setTimeout(()=>this.isShapeshifting=!1,0)},$_gridMixin_registerDomChangeListenersForGrid(){Object(a.a)(this.$el).on("input.grid","textarea",()=>{this.$_gridMixin_lazyUpdateGrid()}),Object(a.a)(this.$el).on("beethoven-load.grid","img",()=>{this.$_gridMixin_lazyUpdateGrid()})}}},f=i(415),b=i(359),C=i(360),_=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},m=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const v=Object(o.d)("browser");let $=class extends r.e{mounted(){this.initializeGrid(this.$refs.wallContainer,t=>{this.sortedPost(t)}),this.isPostable&&this.enableNewPostHandlers()}beforeDestroy(){this.disableNewPostHandlers()}enableNewPostHandlers(){this.enableDoubleClickToPost(this.$el,this.$refs.wishList),this.enablePasteToPost(),this.enableDropToPost(this.$el)}disableNewPostHandlers(){this.disableDoubleClickToPost(this.$el),this.disablePasteToPost(),this.disableDropToPost(this.$el)}toggleNewPostHandlers(t){t?this.enableNewPostHandlers():this.disableNewPostHandlers()}updateGridOnWindowWidthChange(){this.debouncedUpdateGrid()}};_([o.c,m("design:type",Object)],$.prototype,"xHeader",void 0),_([o.c,m("design:type",Object)],$.prototype,"inlinePostEdit",void 0),_([o.b,m("design:type",Object)],$.prototype,"isPostable",void 0),_([v.Getter,m("design:type",Object)],$.prototype,"windowWidth",void 0),_([Object(o.d)("post").Getter,m("design:type",Object)],$.prototype,"sortedPosts",void 0),_([Object(o.d)("post").Action,m("design:type",Object)],$.prototype,"sortedPost",void 0),_([Object(r.f)("isPostable"),m("design:type",Function),m("design:paramtypes",[Object]),m("design:returntype",void 0)],$.prototype,"toggleNewPostHandlers",null),_([Object(r.f)("windowWidth"),m("design:type",Function),m("design:paramtypes",[]),m("design:returntype",void 0)],$.prototype,"updateGridOnWindowWidthChange",null),$=_([Object(r.a)({components:{SurfaceHeader:s.a,SurfacePost:n.a},mixins:[u,f.a,b.a,C.a]})],$);var x=$,y=i(5),w=Object(y.a)(x,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"wallContainer",attrs:{id:"wall-container"}},[t.xHeader?i("surface-header"):t._e(),t._v(" "),i("div",{ref:"wishList",staticClass:"wish-list",attrs:{id:"wish-list"}},t._l(t.sortedPosts,(function(e,s){return i("surface-post",{key:e.cid,attrs:{index:s,post:e,edit:t.inlinePostEdit}})})),1),t._v(" "),i("div",{staticClass:"wish-sizer"}),t._v(" "),i("div",{staticClass:"gutter-sizer"})],1)}),[],!1,null,null,null);e.default=w.exports}}]);
//# sourceMappingURL=113-9241ad651948ed571792.chunk.js.map